From ab5aa84557a79ff537844f25226b22c0459f7348 Mon Sep 17 00:00:00 2001
From: michael-west <michael.west@ettus.com>
Date: Tue, 20 May 2014 11:53:01 -0700
Subject: [PATCH 25/31] Fixed whitespace and added comment.

---
 host/lib/usrp/dboard/db_dbsrx2.cpp |   11 ++++++-----
 1 file changed, 6 insertions(+), 5 deletions(-)

diff --git a/host/lib/usrp/dboard/db_dbsrx2.cpp b/host/lib/usrp/dboard/db_dbsrx2.cpp
index d4d1e8d..1debe3c 100644
--- a/host/lib/usrp/dboard/db_dbsrx2.cpp
+++ b/host/lib/usrp/dboard/db_dbsrx2.cpp
@@ -279,9 +279,10 @@ double dbsrx2::set_lo_freq(double target_freq){
         << boost::format("    Actual Freq=%fMHz\n") % (_lo_freq/1e6)
         << std::endl;
 
-    //send the registers
-	send_reg(0x5, 0x7);
-	send_reg(0x0, 0x4);
+    //send the registers 0x0 through 0x7
+    //writing register 0x4 (F divider LSB) starts the VCO auto seletion so it must be written last
+    send_reg(0x5, 0x7);
+    send_reg(0x0, 0x4);
 
     //FIXME: probably unnecessary to call get_locked here
     //get_locked();
@@ -305,7 +306,7 @@ static int gain_to_bbg_vga_reg(double &gain){
 
     UHD_LOGV(often)
         << boost::format("DBSRX2 BBG Gain:\n")
-        << boost::format("    %f dB, bbg: %d") % gain % reg 
+        << boost::format("    %f dB, bbg: %d") % gain % reg
         << std::endl;
 
     return reg;
@@ -330,7 +331,7 @@ static double gain_to_gc1_rfvga_dac(double &gain){
 
     UHD_LOGV(often)
         << boost::format("DBSRX2 GC1 Gain:\n")
-        << boost::format("    %f dB, dac_volts: %f V") % gain % dac_volts 
+        << boost::format("    %f dB, dac_volts: %f V") % gain % dac_volts
         << std::endl;
 
     //the actual gain setting
-- 
1.7.10.4

