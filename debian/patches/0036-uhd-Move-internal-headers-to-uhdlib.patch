From d9cb94afd4cf6884d6b785f076aa619e2200d464 Mon Sep 17 00:00:00 2001
From: Martin Braun <martin.braun@ettus.com>
Date: Wed, 31 Jan 2018 20:20:14 +0100
Subject: [PATCH 36/40] uhd: Move internal headers to uhdlib/

To avoid the proliferation of additional include directories and
multiple ways of including project-local headers, we now default to
moving all headers that are used across UHD into the uhdlib/
subdirectory.

Some #include statements were also reordered as they were modified for
closer compliance with the coding guidelines.

Internal cpp source files should now include files like this:

    #include <uhdlib/rfnoc/ctrl_iface.hpp>

Reviewed-by: Ashish Chaudhari <ashish.chaudhari@ettus.com>
---
 host/lib/experts/CMakeLists.txt                    |  2 -
 host/lib/experts/expert_container.cpp              |  2 +-
 host/lib/experts/expert_factory.cpp                |  2 +-
 .../uhdlib}/experts/expert_container.hpp           |  2 +-
 .../uhdlib}/experts/expert_factory.hpp             |  2 +-
 .../{ => include/uhdlib}/experts/expert_nodes.hpp  |  0
 host/lib/{ => include/uhdlib}/rfnoc/ctrl_iface.hpp |  0
 host/lib/{ => include/uhdlib}/rfnoc/graph_impl.hpp |  0
 .../{ => include/uhdlib}/rfnoc/legacy_compat.hpp   |  0
 .../{ => include/uhdlib}/rfnoc/radio_ctrl_impl.hpp |  8 +-
 .../{ => include/uhdlib}/rfnoc/rpc_block_ctrl.hpp  |  3 +-
 .../uhdlib}/rfnoc/rx_stream_terminator.hpp         |  0
 .../uhdlib}/rfnoc/tx_stream_terminator.hpp         |  0
 host/lib/{ => include/uhdlib}/rfnoc/utils.hpp      |  0
 .../uhdlib}/rfnoc/wb_iface_adapter.hpp             |  0
 host/lib/{ => include/uhdlib}/rfnoc/xports.hpp     |  0
 .../uhdlib}/usrp/common/ad9361_ctrl.hpp            |  0
 .../uhdlib}/usrp/common/ad936x_manager.hpp         |  2 +-
 .../uhdlib}/usrp/common/adf4001_ctrl.hpp           |  4 +-
 .../{ => include/uhdlib}/usrp/common/adf435x.hpp   |  0
 .../{ => include/uhdlib}/usrp/common/adf535x.hpp   |  0
 .../uhdlib}/usrp/common/apply_corrections.hpp      |  0
 .../uhdlib}/usrp/common/async_packet_handler.hpp   |  0
 .../uhdlib}/usrp/common/fifo_ctrl_excelsior.hpp    |  0
 .../{ => include/uhdlib}/usrp/common/fx2_ctrl.hpp  |  0
 .../{ => include/uhdlib}/usrp/common/max287x.hpp   |  0
 .../uhdlib}/usrp/common/recv_packet_demuxer.hpp    |  0
 .../usrp/common/recv_packet_demuxer_3000.hpp       |  0
 .../uhdlib}/usrp/common/validate_subdev_spec.hpp   |  0
 .../uhdlib}/usrp/cores/dma_fifo_core_3000.hpp      |  2 +-
 .../uhdlib}/usrp/cores/dsp_core_utils.hpp          |  0
 .../uhdlib}/usrp/cores/gpio_atr_3000.hpp           |  0
 .../uhdlib}/usrp/cores/gpio_core_200.hpp           |  0
 .../uhdlib}/usrp/cores/i2c_core_100_wb32.hpp       |  0
 .../uhdlib}/usrp/cores/i2c_core_200.hpp            |  0
 .../uhdlib}/usrp/cores/radio_ctrl_core_3000.hpp    |  0
 .../uhdlib}/usrp/cores/rx_dsp_core_200.hpp         |  0
 .../uhdlib}/usrp/cores/rx_dsp_core_3000.hpp        |  0
 .../uhdlib}/usrp/cores/rx_frontend_core_200.hpp    |  0
 .../uhdlib}/usrp/cores/rx_frontend_core_3000.hpp   |  0
 .../uhdlib}/usrp/cores/rx_vita_core_3000.hpp       |  0
 .../uhdlib}/usrp/cores/spi_core_3000.hpp           |  0
 .../uhdlib}/usrp/cores/time64_core_200.hpp         |  0
 .../uhdlib}/usrp/cores/time_core_3000.hpp          |  0
 .../uhdlib}/usrp/cores/tx_dsp_core_200.hpp         |  0
 .../uhdlib}/usrp/cores/tx_dsp_core_3000.hpp        |  0
 .../uhdlib}/usrp/cores/tx_frontend_core_200.hpp    |  0
 .../uhdlib}/usrp/cores/tx_vita_core_3000.hpp       |  0
 .../uhdlib}/usrp/cores/user_settings_core_200.hpp  |  0
 .../uhdlib}/usrp/cores/user_settings_core_3000.hpp |  0
 .../{ => include/uhdlib}/utils/eeprom_utils.hpp    |  0
 host/lib/{ => include/uhdlib}/utils/ihex.hpp       |  0
 host/lib/{ => include/uhdlib}/utils/rpc.hpp        |  0
 host/lib/rfnoc/CMakeLists.txt                      |  2 -
 host/lib/rfnoc/block_ctrl_base.cpp                 |  2 +-
 host/lib/rfnoc/ctrl_iface.cpp                      |  3 +-
 host/lib/rfnoc/ddc_block_ctrl_impl.cpp             |  2 +-
 host/lib/rfnoc/dma_fifo_block_ctrl_impl.cpp        |  4 +-
 host/lib/rfnoc/duc_block_ctrl_impl.cpp             |  2 +-
 host/lib/rfnoc/graph_impl.cpp                      |  2 +-
 host/lib/rfnoc/legacy_compat.cpp                   |  3 +-
 host/lib/rfnoc/radio_ctrl_impl.cpp                 |  4 +-
 host/lib/rfnoc/rx_stream_terminator.cpp            |  4 +-
 host/lib/rfnoc/sink_block_ctrl_base.cpp            |  2 +-
 host/lib/rfnoc/sink_node_ctrl.cpp                  |  2 +-
 host/lib/rfnoc/source_block_ctrl_base.cpp          |  2 +-
 host/lib/rfnoc/source_node_ctrl.cpp                |  2 +-
 host/lib/rfnoc/tx_stream_terminator.cpp            |  4 +-
 host/lib/rfnoc/wb_iface_adapter.cpp                |  2 +-
 host/lib/transport/super_recv_packet_handler.hpp   |  2 +-
 host/lib/transport/super_send_packet_handler.hpp   |  2 +-
 host/lib/usrp/b100/b100_impl.cpp                   |  2 +-
 host/lib/usrp/b100/b100_impl.hpp                   | 20 ++---
 host/lib/usrp/b100/dboard_iface.cpp                |  5 +-
 host/lib/usrp/b100/io_impl.cpp                     |  8 +-
 host/lib/usrp/b100/mb_eeprom.cpp                   |  2 +-
 host/lib/usrp/b200/b200_cores.hpp                  |  4 +-
 host/lib/usrp/b200/b200_iface.cpp                  |  8 +-
 host/lib/usrp/b200/b200_iface.hpp                  |  4 +-
 host/lib/usrp/b200/b200_impl.hpp                   | 23 +++---
 host/lib/usrp/b200/b200_io_impl.cpp                |  4 +-
 host/lib/usrp/b200/b200_mb_eeprom.cpp              |  2 +-
 host/lib/usrp/common/CMakeLists.txt                |  1 -
 host/lib/usrp/common/ad9361_ctrl.cpp               |  4 +-
 host/lib/usrp/common/ad936x_manager.cpp            |  2 +-
 host/lib/usrp/common/adf4001_ctrl.cpp              |  4 +-
 host/lib/usrp/common/adf435x.cpp                   |  2 +-
 host/lib/usrp/common/adf535x.cpp                   |  2 +-
 host/lib/usrp/common/apply_corrections.cpp         |  2 +-
 host/lib/usrp/common/fifo_ctrl_excelsior.cpp       |  4 +-
 host/lib/usrp/common/fx2_ctrl.cpp                  |  2 +-
 host/lib/usrp/common/lmk04828.cpp                  | 86 ----------------------
 host/lib/usrp/common/lmk04828.hpp                  | 56 --------------
 host/lib/usrp/common/recv_packet_demuxer.cpp       |  5 +-
 host/lib/usrp/common/validate_subdev_spec.cpp      |  2 +-
 host/lib/usrp/cores/CMakeLists.txt                 |  3 -
 host/lib/usrp/cores/dma_fifo_core_3000.cpp         |  5 +-
 host/lib/usrp/cores/dsp_core_utils.cpp             |  2 +-
 host/lib/usrp/cores/gpio_atr_3000.cpp              |  2 +-
 host/lib/usrp/cores/gpio_core_200.cpp              |  2 +-
 host/lib/usrp/cores/i2c_core_100_wb32.cpp          |  2 +-
 host/lib/usrp/cores/i2c_core_200.cpp               |  2 +-
 host/lib/usrp/cores/radio_ctrl_core_3000.cpp       |  4 +-
 host/lib/usrp/cores/rx_dsp_core_200.cpp            |  4 +-
 host/lib/usrp/cores/rx_dsp_core_3000.cpp           |  4 +-
 host/lib/usrp/cores/rx_frontend_core_200.cpp       |  2 +-
 host/lib/usrp/cores/rx_frontend_core_3000.cpp      |  6 +-
 host/lib/usrp/cores/rx_vita_core_3000.cpp          |  2 +-
 host/lib/usrp/cores/spi_core_3000.cpp              |  2 +-
 host/lib/usrp/cores/time64_core_200.cpp            |  2 +-
 host/lib/usrp/cores/time_core_3000.cpp             |  2 +-
 host/lib/usrp/cores/tx_dsp_core_200.cpp            |  4 +-
 host/lib/usrp/cores/tx_dsp_core_3000.cpp           |  4 +-
 host/lib/usrp/cores/tx_frontend_core_200.cpp       |  2 +-
 host/lib/usrp/cores/tx_vita_core_3000.cpp          |  2 +-
 host/lib/usrp/cores/user_settings_core_200.cpp     |  2 +-
 host/lib/usrp/cores/user_settings_core_3000.cpp    |  2 +-
 host/lib/usrp/dboard/db_sbx_common.hpp             |  4 +-
 host/lib/usrp/dboard/db_twinrx.cpp                 |  3 +-
 host/lib/usrp/dboard/db_ubx.cpp                    |  4 +-
 host/lib/usrp/dboard/db_wbx_common.hpp             |  2 +-
 .../usrp/dboard/eiscat/eiscat_radio_ctrl_impl.hpp  |  4 +-
 .../dboard/magnesium/magnesium_ad9371_iface.hpp    |  2 +-
 .../dboard/magnesium/magnesium_radio_ctrl_impl.hpp |  8 +-
 .../dboard/magnesium/magnesium_radio_ctrl_init.cpp |  2 +-
 host/lib/usrp/dboard/twinrx/twinrx_ctrl.cpp        |  4 +-
 host/lib/usrp/dboard/twinrx/twinrx_experts.hpp     |  2 +-
 host/lib/usrp/dboard/twinrx/twinrx_io.hpp          |  2 +-
 host/lib/usrp/device3/device3_impl.cpp             |  4 +-
 host/lib/usrp/device3/device3_impl.hpp             |  2 +-
 host/lib/usrp/device3/device3_io_impl.cpp          |  7 +-
 host/lib/usrp/e300/e300_impl.hpp                   | 22 +++---
 host/lib/usrp/e300/e300_io_impl.cpp                |  4 +-
 host/lib/usrp/e300/e300_network.cpp                |  4 +-
 host/lib/usrp/e300/e300_remote_codec_ctrl.hpp      |  2 +-
 host/lib/usrp/mpmd/mpmd_impl.cpp                   |  9 ++-
 host/lib/usrp/mpmd/mpmd_impl.hpp                   |  2 +-
 host/lib/usrp/multi_usrp.cpp                       |  2 +-
 host/lib/usrp/n230/n230_clk_pps_ctrl.hpp           |  8 +-
 host/lib/usrp/n230/n230_cores.hpp                  |  4 +-
 host/lib/usrp/n230/n230_frontend_ctrl.hpp          |  8 +-
 host/lib/usrp/n230/n230_impl.cpp                   | 15 ++--
 host/lib/usrp/n230/n230_impl.hpp                   |  2 +-
 host/lib/usrp/n230/n230_resource_manager.hpp       | 37 +++++-----
 host/lib/usrp/n230/n230_stream_manager.cpp         |  4 +-
 host/lib/usrp/n230/n230_stream_manager.hpp         |  9 ++-
 host/lib/usrp/usrp1/io_impl.cpp                    |  6 +-
 host/lib/usrp/usrp1/mb_eeprom.cpp                  |  2 +-
 host/lib/usrp/usrp1/usrp1_calc_mux.hpp             |  1 +
 host/lib/usrp/usrp1/usrp1_iface.hpp                |  2 +-
 host/lib/usrp/usrp2/dboard_iface.cpp               |  8 +-
 host/lib/usrp/usrp2/io_impl.cpp                    |  4 +-
 host/lib/usrp/usrp2/mb_eeprom.cpp                  |  2 +-
 host/lib/usrp/usrp2/usrp2_impl.cpp                 |  2 +-
 host/lib/usrp/usrp2/usrp2_impl.hpp                 | 18 ++---
 host/lib/usrp/x300/x300_dboard_iface.hpp           | 10 +--
 host/lib/usrp/x300/x300_impl.cpp                   | 15 ++--
 host/lib/usrp/x300/x300_impl.hpp                   | 18 +++--
 host/lib/usrp/x300/x300_io_impl.cpp                |  4 +-
 host/lib/usrp/x300/x300_mb_eeprom.cpp              |  2 +-
 host/lib/usrp/x300/x300_radio_ctrl_impl.cpp        |  7 +-
 host/lib/usrp/x300/x300_radio_ctrl_impl.hpp        |  8 +-
 .../octoclock/octoclock_image_loader.cpp           |  4 +-
 host/lib/utils/CMakeLists.txt                      |  2 -
 host/lib/utils/eeprom_utils.cpp                    |  2 +-
 host/lib/utils/ihex.cpp                            |  2 +-
 host/tests/expert_test.cpp                         |  4 +-
 host/utils/CMakeLists.txt                          |  1 +
 168 files changed, 280 insertions(+), 417 deletions(-)
 rename host/lib/{ => include/uhdlib}/experts/expert_container.hpp (99%)
 rename host/lib/{ => include/uhdlib}/experts/expert_factory.hpp (99%)
 rename host/lib/{ => include/uhdlib}/experts/expert_nodes.hpp (100%)
 rename host/lib/{ => include/uhdlib}/rfnoc/ctrl_iface.hpp (100%)
 rename host/lib/{ => include/uhdlib}/rfnoc/graph_impl.hpp (100%)
 rename host/lib/{ => include/uhdlib}/rfnoc/legacy_compat.hpp (100%)
 rename host/lib/{ => include/uhdlib}/rfnoc/radio_ctrl_impl.hpp (98%)
 rename host/lib/{ => include/uhdlib}/rfnoc/rpc_block_ctrl.hpp (92%)
 rename host/lib/{ => include/uhdlib}/rfnoc/rx_stream_terminator.hpp (100%)
 rename host/lib/{ => include/uhdlib}/rfnoc/tx_stream_terminator.hpp (100%)
 rename host/lib/{ => include/uhdlib}/rfnoc/utils.hpp (100%)
 rename host/lib/{ => include/uhdlib}/rfnoc/wb_iface_adapter.hpp (100%)
 rename host/lib/{ => include/uhdlib}/rfnoc/xports.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/common/ad9361_ctrl.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/common/ad936x_manager.hpp (98%)
 rename host/lib/{ => include/uhdlib}/usrp/common/adf4001_ctrl.hpp (98%)
 rename host/lib/{ => include/uhdlib}/usrp/common/adf435x.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/common/adf535x.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/common/apply_corrections.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/common/async_packet_handler.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/common/fifo_ctrl_excelsior.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/common/fx2_ctrl.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/common/max287x.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/common/recv_packet_demuxer.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/common/recv_packet_demuxer_3000.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/common/validate_subdev_spec.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/cores/dma_fifo_core_3000.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/cores/dsp_core_utils.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/cores/gpio_atr_3000.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/cores/gpio_core_200.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/cores/i2c_core_100_wb32.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/cores/i2c_core_200.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/cores/radio_ctrl_core_3000.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/cores/rx_dsp_core_200.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/cores/rx_dsp_core_3000.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/cores/rx_frontend_core_200.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/cores/rx_frontend_core_3000.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/cores/rx_vita_core_3000.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/cores/spi_core_3000.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/cores/time64_core_200.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/cores/time_core_3000.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/cores/tx_dsp_core_200.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/cores/tx_dsp_core_3000.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/cores/tx_frontend_core_200.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/cores/tx_vita_core_3000.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/cores/user_settings_core_200.hpp (100%)
 rename host/lib/{ => include/uhdlib}/usrp/cores/user_settings_core_3000.hpp (100%)
 rename host/lib/{ => include/uhdlib}/utils/eeprom_utils.hpp (100%)
 rename host/lib/{ => include/uhdlib}/utils/ihex.hpp (100%)
 rename host/lib/{ => include/uhdlib}/utils/rpc.hpp (100%)
 delete mode 100644 host/lib/usrp/common/lmk04828.cpp
 delete mode 100644 host/lib/usrp/common/lmk04828.hpp

diff --git a/host/lib/experts/CMakeLists.txt b/host/lib/experts/CMakeLists.txt
index 2c72721a4..3101a7330 100644
--- a/host/lib/experts/CMakeLists.txt
+++ b/host/lib/experts/CMakeLists.txt
@@ -8,8 +8,6 @@
 ########################################################################
 # This file included, use CMake directory variables
 ########################################################################
-INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})
-
 LIBUHD_APPEND_SOURCES(
     ${CMAKE_CURRENT_SOURCE_DIR}/expert_container.cpp
     ${CMAKE_CURRENT_SOURCE_DIR}/expert_factory.cpp
diff --git a/host/lib/experts/expert_container.cpp b/host/lib/experts/expert_container.cpp
index 8d01337f8..1cdc7841b 100644
--- a/host/lib/experts/expert_container.cpp
+++ b/host/lib/experts/expert_container.cpp
@@ -5,7 +5,7 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "expert_container.hpp"
+#include <uhdlib/experts/expert_container.hpp>
 #include <uhd/exception.hpp>
 #include <uhd/utils/log.hpp>
 #include <boost/format.hpp>
diff --git a/host/lib/experts/expert_factory.cpp b/host/lib/experts/expert_factory.cpp
index 54286eee8..abc718d28 100644
--- a/host/lib/experts/expert_factory.cpp
+++ b/host/lib/experts/expert_factory.cpp
@@ -5,7 +5,7 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "expert_factory.hpp"
+#include <uhdlib/experts/expert_factory.hpp>
 
 namespace uhd { namespace experts {
 
diff --git a/host/lib/experts/expert_container.hpp b/host/lib/include/uhdlib/experts/expert_container.hpp
similarity index 99%
rename from host/lib/experts/expert_container.hpp
rename to host/lib/include/uhdlib/experts/expert_container.hpp
index 1f7193813..c50e45847 100644
--- a/host/lib/experts/expert_container.hpp
+++ b/host/lib/include/uhdlib/experts/expert_container.hpp
@@ -8,7 +8,7 @@
 #ifndef INCLUDED_UHD_EXPERTS_EXPERT_CONTAINER_HPP
 #define INCLUDED_UHD_EXPERTS_EXPERT_CONTAINER_HPP
 
-#include "expert_nodes.hpp"
+#include <uhdlib/experts/expert_nodes.hpp>
 #include <uhd/config.hpp>
 #include <boost/noncopyable.hpp>
 #include <boost/shared_ptr.hpp>
diff --git a/host/lib/experts/expert_factory.hpp b/host/lib/include/uhdlib/experts/expert_factory.hpp
similarity index 99%
rename from host/lib/experts/expert_factory.hpp
rename to host/lib/include/uhdlib/experts/expert_factory.hpp
index 4f24c747d..72798eccc 100644
--- a/host/lib/experts/expert_factory.hpp
+++ b/host/lib/include/uhdlib/experts/expert_factory.hpp
@@ -8,7 +8,7 @@
 #ifndef INCLUDED_UHD_EXPERTS_EXPERT_FACTORY_HPP
 #define INCLUDED_UHD_EXPERTS_EXPERT_FACTORY_HPP
 
-#include "expert_container.hpp"
+#include <uhdlib/experts/expert_container.hpp>
 #include <uhd/property_tree.hpp>
 #include <uhd/config.hpp>
 #include <boost/noncopyable.hpp>
diff --git a/host/lib/experts/expert_nodes.hpp b/host/lib/include/uhdlib/experts/expert_nodes.hpp
similarity index 100%
rename from host/lib/experts/expert_nodes.hpp
rename to host/lib/include/uhdlib/experts/expert_nodes.hpp
diff --git a/host/lib/rfnoc/ctrl_iface.hpp b/host/lib/include/uhdlib/rfnoc/ctrl_iface.hpp
similarity index 100%
rename from host/lib/rfnoc/ctrl_iface.hpp
rename to host/lib/include/uhdlib/rfnoc/ctrl_iface.hpp
diff --git a/host/lib/rfnoc/graph_impl.hpp b/host/lib/include/uhdlib/rfnoc/graph_impl.hpp
similarity index 100%
rename from host/lib/rfnoc/graph_impl.hpp
rename to host/lib/include/uhdlib/rfnoc/graph_impl.hpp
diff --git a/host/lib/rfnoc/legacy_compat.hpp b/host/lib/include/uhdlib/rfnoc/legacy_compat.hpp
similarity index 100%
rename from host/lib/rfnoc/legacy_compat.hpp
rename to host/lib/include/uhdlib/rfnoc/legacy_compat.hpp
diff --git a/host/lib/rfnoc/radio_ctrl_impl.hpp b/host/lib/include/uhdlib/rfnoc/radio_ctrl_impl.hpp
similarity index 98%
rename from host/lib/rfnoc/radio_ctrl_impl.hpp
rename to host/lib/include/uhdlib/rfnoc/radio_ctrl_impl.hpp
index 83c32c771..a5876584e 100644
--- a/host/lib/rfnoc/radio_ctrl_impl.hpp
+++ b/host/lib/include/uhdlib/rfnoc/radio_ctrl_impl.hpp
@@ -8,12 +8,12 @@
 #ifndef INCLUDED_LIBUHD_RFNOC_RADIO_CTRL_IMPL_HPP
 #define INCLUDED_LIBUHD_RFNOC_RADIO_CTRL_IMPL_HPP
 
-#include "rx_vita_core_3000.hpp"
-#include "tx_vita_core_3000.hpp"
-#include "time_core_3000.hpp"
-#include "gpio_atr_3000.hpp"
 #include <uhd/rfnoc/radio_ctrl.hpp>
 #include <uhd/types/direction.hpp>
+#include <uhdlib/usrp/cores/rx_vita_core_3000.hpp>
+#include <uhdlib/usrp/cores/tx_vita_core_3000.hpp>
+#include <uhdlib/usrp/cores/time_core_3000.hpp>
+#include <uhdlib/usrp/cores/gpio_atr_3000.hpp>
 #include <boost/thread.hpp>
 #include <mutex>
 
diff --git a/host/lib/rfnoc/rpc_block_ctrl.hpp b/host/lib/include/uhdlib/rfnoc/rpc_block_ctrl.hpp
similarity index 92%
rename from host/lib/rfnoc/rpc_block_ctrl.hpp
rename to host/lib/include/uhdlib/rfnoc/rpc_block_ctrl.hpp
index 36170716e..91091d8c2 100644
--- a/host/lib/rfnoc/rpc_block_ctrl.hpp
+++ b/host/lib/include/uhdlib/rfnoc/rpc_block_ctrl.hpp
@@ -7,7 +7,8 @@
 #ifndef INCLUDED_LIBUHD_RFNOC_RPC_BLOCK_CTRL_HPP
 #define INCLUDED_LIBUHD_RFNOC_RPC_BLOCK_CTRL_HPP
 
-#include "../utils/rpc.hpp"
+#include <uhd/types/device_addr.hpp>
+#include <uhdlib/utils/rpc.hpp>
 
 namespace uhd {
     namespace rfnoc {
diff --git a/host/lib/rfnoc/rx_stream_terminator.hpp b/host/lib/include/uhdlib/rfnoc/rx_stream_terminator.hpp
similarity index 100%
rename from host/lib/rfnoc/rx_stream_terminator.hpp
rename to host/lib/include/uhdlib/rfnoc/rx_stream_terminator.hpp
diff --git a/host/lib/rfnoc/tx_stream_terminator.hpp b/host/lib/include/uhdlib/rfnoc/tx_stream_terminator.hpp
similarity index 100%
rename from host/lib/rfnoc/tx_stream_terminator.hpp
rename to host/lib/include/uhdlib/rfnoc/tx_stream_terminator.hpp
diff --git a/host/lib/rfnoc/utils.hpp b/host/lib/include/uhdlib/rfnoc/utils.hpp
similarity index 100%
rename from host/lib/rfnoc/utils.hpp
rename to host/lib/include/uhdlib/rfnoc/utils.hpp
diff --git a/host/lib/rfnoc/wb_iface_adapter.hpp b/host/lib/include/uhdlib/rfnoc/wb_iface_adapter.hpp
similarity index 100%
rename from host/lib/rfnoc/wb_iface_adapter.hpp
rename to host/lib/include/uhdlib/rfnoc/wb_iface_adapter.hpp
diff --git a/host/lib/rfnoc/xports.hpp b/host/lib/include/uhdlib/rfnoc/xports.hpp
similarity index 100%
rename from host/lib/rfnoc/xports.hpp
rename to host/lib/include/uhdlib/rfnoc/xports.hpp
diff --git a/host/lib/usrp/common/ad9361_ctrl.hpp b/host/lib/include/uhdlib/usrp/common/ad9361_ctrl.hpp
similarity index 100%
rename from host/lib/usrp/common/ad9361_ctrl.hpp
rename to host/lib/include/uhdlib/usrp/common/ad9361_ctrl.hpp
diff --git a/host/lib/usrp/common/ad936x_manager.hpp b/host/lib/include/uhdlib/usrp/common/ad936x_manager.hpp
similarity index 98%
rename from host/lib/usrp/common/ad936x_manager.hpp
rename to host/lib/include/uhdlib/usrp/common/ad936x_manager.hpp
index dd5c38337..7934b1050 100644
--- a/host/lib/usrp/common/ad936x_manager.hpp
+++ b/host/lib/include/uhdlib/usrp/common/ad936x_manager.hpp
@@ -12,9 +12,9 @@
 #include <uhd/utils/math.hpp>
 #include <uhd/property_tree.hpp>
 #include <uhd/types/direction.hpp>
+#include <uhdlib/usrp/common/ad9361_ctrl.hpp>
 #include <boost/format.hpp>
 #include <boost/shared_ptr.hpp>
-#include "ad9361_ctrl.hpp"
 #include <stdint.h>
 
 namespace uhd { namespace usrp {
diff --git a/host/lib/usrp/common/adf4001_ctrl.hpp b/host/lib/include/uhdlib/usrp/common/adf4001_ctrl.hpp
similarity index 98%
rename from host/lib/usrp/common/adf4001_ctrl.hpp
rename to host/lib/include/uhdlib/usrp/common/adf4001_ctrl.hpp
index c7f6668b8..8aa449539 100644
--- a/host/lib/usrp/common/adf4001_ctrl.hpp
+++ b/host/lib/include/uhdlib/usrp/common/adf4001_ctrl.hpp
@@ -13,10 +13,10 @@
 #ifndef INCLUDED_LIBUHD_USRP_COMMON_ADF4001_HPP
 #define INCLUDED_LIBUHD_USRP_COMMON_ADF4001_HPP
 
-#include "spi_core_3000.hpp"
 #include <uhd/types/serial.hpp>
-#include <stdint.h>
+#include <uhdlib/usrp/cores/spi_core_3000.hpp>
 #include <boost/thread/thread.hpp>
+#include <stdint.h>
 
 namespace uhd { namespace usrp {
 
diff --git a/host/lib/usrp/common/adf435x.hpp b/host/lib/include/uhdlib/usrp/common/adf435x.hpp
similarity index 100%
rename from host/lib/usrp/common/adf435x.hpp
rename to host/lib/include/uhdlib/usrp/common/adf435x.hpp
diff --git a/host/lib/usrp/common/adf535x.hpp b/host/lib/include/uhdlib/usrp/common/adf535x.hpp
similarity index 100%
rename from host/lib/usrp/common/adf535x.hpp
rename to host/lib/include/uhdlib/usrp/common/adf535x.hpp
diff --git a/host/lib/usrp/common/apply_corrections.hpp b/host/lib/include/uhdlib/usrp/common/apply_corrections.hpp
similarity index 100%
rename from host/lib/usrp/common/apply_corrections.hpp
rename to host/lib/include/uhdlib/usrp/common/apply_corrections.hpp
diff --git a/host/lib/usrp/common/async_packet_handler.hpp b/host/lib/include/uhdlib/usrp/common/async_packet_handler.hpp
similarity index 100%
rename from host/lib/usrp/common/async_packet_handler.hpp
rename to host/lib/include/uhdlib/usrp/common/async_packet_handler.hpp
diff --git a/host/lib/usrp/common/fifo_ctrl_excelsior.hpp b/host/lib/include/uhdlib/usrp/common/fifo_ctrl_excelsior.hpp
similarity index 100%
rename from host/lib/usrp/common/fifo_ctrl_excelsior.hpp
rename to host/lib/include/uhdlib/usrp/common/fifo_ctrl_excelsior.hpp
diff --git a/host/lib/usrp/common/fx2_ctrl.hpp b/host/lib/include/uhdlib/usrp/common/fx2_ctrl.hpp
similarity index 100%
rename from host/lib/usrp/common/fx2_ctrl.hpp
rename to host/lib/include/uhdlib/usrp/common/fx2_ctrl.hpp
diff --git a/host/lib/usrp/common/max287x.hpp b/host/lib/include/uhdlib/usrp/common/max287x.hpp
similarity index 100%
rename from host/lib/usrp/common/max287x.hpp
rename to host/lib/include/uhdlib/usrp/common/max287x.hpp
diff --git a/host/lib/usrp/common/recv_packet_demuxer.hpp b/host/lib/include/uhdlib/usrp/common/recv_packet_demuxer.hpp
similarity index 100%
rename from host/lib/usrp/common/recv_packet_demuxer.hpp
rename to host/lib/include/uhdlib/usrp/common/recv_packet_demuxer.hpp
diff --git a/host/lib/usrp/common/recv_packet_demuxer_3000.hpp b/host/lib/include/uhdlib/usrp/common/recv_packet_demuxer_3000.hpp
similarity index 100%
rename from host/lib/usrp/common/recv_packet_demuxer_3000.hpp
rename to host/lib/include/uhdlib/usrp/common/recv_packet_demuxer_3000.hpp
diff --git a/host/lib/usrp/common/validate_subdev_spec.hpp b/host/lib/include/uhdlib/usrp/common/validate_subdev_spec.hpp
similarity index 100%
rename from host/lib/usrp/common/validate_subdev_spec.hpp
rename to host/lib/include/uhdlib/usrp/common/validate_subdev_spec.hpp
diff --git a/host/lib/usrp/cores/dma_fifo_core_3000.hpp b/host/lib/include/uhdlib/usrp/cores/dma_fifo_core_3000.hpp
similarity index 100%
rename from host/lib/usrp/cores/dma_fifo_core_3000.hpp
rename to host/lib/include/uhdlib/usrp/cores/dma_fifo_core_3000.hpp
index db665a6c9..17c02c93a 100644
--- a/host/lib/usrp/cores/dma_fifo_core_3000.hpp
+++ b/host/lib/include/uhdlib/usrp/cores/dma_fifo_core_3000.hpp
@@ -9,9 +9,9 @@
 #define INCLUDED_LIBUHD_USRP_DMA_FIFO_CORE_3000_HPP
 
 #include <uhd/config.hpp>
+#include <uhd/types/wb_iface.hpp>
 #include <boost/shared_ptr.hpp>
 #include <boost/noncopyable.hpp>
-#include <uhd/types/wb_iface.hpp>
 
 
 class dma_fifo_core_3000 : boost::noncopyable
diff --git a/host/lib/usrp/cores/dsp_core_utils.hpp b/host/lib/include/uhdlib/usrp/cores/dsp_core_utils.hpp
similarity index 100%
rename from host/lib/usrp/cores/dsp_core_utils.hpp
rename to host/lib/include/uhdlib/usrp/cores/dsp_core_utils.hpp
diff --git a/host/lib/usrp/cores/gpio_atr_3000.hpp b/host/lib/include/uhdlib/usrp/cores/gpio_atr_3000.hpp
similarity index 100%
rename from host/lib/usrp/cores/gpio_atr_3000.hpp
rename to host/lib/include/uhdlib/usrp/cores/gpio_atr_3000.hpp
diff --git a/host/lib/usrp/cores/gpio_core_200.hpp b/host/lib/include/uhdlib/usrp/cores/gpio_core_200.hpp
similarity index 100%
rename from host/lib/usrp/cores/gpio_core_200.hpp
rename to host/lib/include/uhdlib/usrp/cores/gpio_core_200.hpp
diff --git a/host/lib/usrp/cores/i2c_core_100_wb32.hpp b/host/lib/include/uhdlib/usrp/cores/i2c_core_100_wb32.hpp
similarity index 100%
rename from host/lib/usrp/cores/i2c_core_100_wb32.hpp
rename to host/lib/include/uhdlib/usrp/cores/i2c_core_100_wb32.hpp
diff --git a/host/lib/usrp/cores/i2c_core_200.hpp b/host/lib/include/uhdlib/usrp/cores/i2c_core_200.hpp
similarity index 100%
rename from host/lib/usrp/cores/i2c_core_200.hpp
rename to host/lib/include/uhdlib/usrp/cores/i2c_core_200.hpp
diff --git a/host/lib/usrp/cores/radio_ctrl_core_3000.hpp b/host/lib/include/uhdlib/usrp/cores/radio_ctrl_core_3000.hpp
similarity index 100%
rename from host/lib/usrp/cores/radio_ctrl_core_3000.hpp
rename to host/lib/include/uhdlib/usrp/cores/radio_ctrl_core_3000.hpp
diff --git a/host/lib/usrp/cores/rx_dsp_core_200.hpp b/host/lib/include/uhdlib/usrp/cores/rx_dsp_core_200.hpp
similarity index 100%
rename from host/lib/usrp/cores/rx_dsp_core_200.hpp
rename to host/lib/include/uhdlib/usrp/cores/rx_dsp_core_200.hpp
diff --git a/host/lib/usrp/cores/rx_dsp_core_3000.hpp b/host/lib/include/uhdlib/usrp/cores/rx_dsp_core_3000.hpp
similarity index 100%
rename from host/lib/usrp/cores/rx_dsp_core_3000.hpp
rename to host/lib/include/uhdlib/usrp/cores/rx_dsp_core_3000.hpp
diff --git a/host/lib/usrp/cores/rx_frontend_core_200.hpp b/host/lib/include/uhdlib/usrp/cores/rx_frontend_core_200.hpp
similarity index 100%
rename from host/lib/usrp/cores/rx_frontend_core_200.hpp
rename to host/lib/include/uhdlib/usrp/cores/rx_frontend_core_200.hpp
diff --git a/host/lib/usrp/cores/rx_frontend_core_3000.hpp b/host/lib/include/uhdlib/usrp/cores/rx_frontend_core_3000.hpp
similarity index 100%
rename from host/lib/usrp/cores/rx_frontend_core_3000.hpp
rename to host/lib/include/uhdlib/usrp/cores/rx_frontend_core_3000.hpp
diff --git a/host/lib/usrp/cores/rx_vita_core_3000.hpp b/host/lib/include/uhdlib/usrp/cores/rx_vita_core_3000.hpp
similarity index 100%
rename from host/lib/usrp/cores/rx_vita_core_3000.hpp
rename to host/lib/include/uhdlib/usrp/cores/rx_vita_core_3000.hpp
diff --git a/host/lib/usrp/cores/spi_core_3000.hpp b/host/lib/include/uhdlib/usrp/cores/spi_core_3000.hpp
similarity index 100%
rename from host/lib/usrp/cores/spi_core_3000.hpp
rename to host/lib/include/uhdlib/usrp/cores/spi_core_3000.hpp
diff --git a/host/lib/usrp/cores/time64_core_200.hpp b/host/lib/include/uhdlib/usrp/cores/time64_core_200.hpp
similarity index 100%
rename from host/lib/usrp/cores/time64_core_200.hpp
rename to host/lib/include/uhdlib/usrp/cores/time64_core_200.hpp
diff --git a/host/lib/usrp/cores/time_core_3000.hpp b/host/lib/include/uhdlib/usrp/cores/time_core_3000.hpp
similarity index 100%
rename from host/lib/usrp/cores/time_core_3000.hpp
rename to host/lib/include/uhdlib/usrp/cores/time_core_3000.hpp
diff --git a/host/lib/usrp/cores/tx_dsp_core_200.hpp b/host/lib/include/uhdlib/usrp/cores/tx_dsp_core_200.hpp
similarity index 100%
rename from host/lib/usrp/cores/tx_dsp_core_200.hpp
rename to host/lib/include/uhdlib/usrp/cores/tx_dsp_core_200.hpp
diff --git a/host/lib/usrp/cores/tx_dsp_core_3000.hpp b/host/lib/include/uhdlib/usrp/cores/tx_dsp_core_3000.hpp
similarity index 100%
rename from host/lib/usrp/cores/tx_dsp_core_3000.hpp
rename to host/lib/include/uhdlib/usrp/cores/tx_dsp_core_3000.hpp
diff --git a/host/lib/usrp/cores/tx_frontend_core_200.hpp b/host/lib/include/uhdlib/usrp/cores/tx_frontend_core_200.hpp
similarity index 100%
rename from host/lib/usrp/cores/tx_frontend_core_200.hpp
rename to host/lib/include/uhdlib/usrp/cores/tx_frontend_core_200.hpp
diff --git a/host/lib/usrp/cores/tx_vita_core_3000.hpp b/host/lib/include/uhdlib/usrp/cores/tx_vita_core_3000.hpp
similarity index 100%
rename from host/lib/usrp/cores/tx_vita_core_3000.hpp
rename to host/lib/include/uhdlib/usrp/cores/tx_vita_core_3000.hpp
diff --git a/host/lib/usrp/cores/user_settings_core_200.hpp b/host/lib/include/uhdlib/usrp/cores/user_settings_core_200.hpp
similarity index 100%
rename from host/lib/usrp/cores/user_settings_core_200.hpp
rename to host/lib/include/uhdlib/usrp/cores/user_settings_core_200.hpp
diff --git a/host/lib/usrp/cores/user_settings_core_3000.hpp b/host/lib/include/uhdlib/usrp/cores/user_settings_core_3000.hpp
similarity index 100%
rename from host/lib/usrp/cores/user_settings_core_3000.hpp
rename to host/lib/include/uhdlib/usrp/cores/user_settings_core_3000.hpp
diff --git a/host/lib/utils/eeprom_utils.hpp b/host/lib/include/uhdlib/utils/eeprom_utils.hpp
similarity index 100%
rename from host/lib/utils/eeprom_utils.hpp
rename to host/lib/include/uhdlib/utils/eeprom_utils.hpp
diff --git a/host/lib/utils/ihex.hpp b/host/lib/include/uhdlib/utils/ihex.hpp
similarity index 100%
rename from host/lib/utils/ihex.hpp
rename to host/lib/include/uhdlib/utils/ihex.hpp
diff --git a/host/lib/utils/rpc.hpp b/host/lib/include/uhdlib/utils/rpc.hpp
similarity index 100%
rename from host/lib/utils/rpc.hpp
rename to host/lib/include/uhdlib/utils/rpc.hpp
diff --git a/host/lib/rfnoc/CMakeLists.txt b/host/lib/rfnoc/CMakeLists.txt
index 76e5cbd9d..9ee4970a3 100644
--- a/host/lib/rfnoc/CMakeLists.txt
+++ b/host/lib/rfnoc/CMakeLists.txt
@@ -9,8 +9,6 @@
 # This file included, use CMake directory variables
 ########################################################################
 
-INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})
-
 LIBUHD_APPEND_SOURCES(
     # Infrastructure:
     ${CMAKE_CURRENT_SOURCE_DIR}/block_ctrl_base.cpp
diff --git a/host/lib/rfnoc/block_ctrl_base.cpp b/host/lib/rfnoc/block_ctrl_base.cpp
index 3bf0edd87..e842dabff 100644
--- a/host/lib/rfnoc/block_ctrl_base.cpp
+++ b/host/lib/rfnoc/block_ctrl_base.cpp
@@ -8,7 +8,6 @@
 // This file contains the block control functions for block controller classes.
 // See block_ctrl_base_factory.cpp for discovery and factory functions.
 
-#include "ctrl_iface.hpp"
 #include "nocscript/block_iface.hpp"
 
 #include <uhd/utils/log.hpp>
@@ -16,6 +15,7 @@
 #include <uhd/rfnoc/block_ctrl_base.hpp>
 #include <uhd/rfnoc/constants.hpp>
 #include <uhdlib/utils/compat_check.hpp>
+#include <uhdlib/rfnoc/ctrl_iface.hpp>
 #include <boost/format.hpp>
 #include <boost/bind.hpp>
 
diff --git a/host/lib/rfnoc/ctrl_iface.cpp b/host/lib/rfnoc/ctrl_iface.cpp
index d9975f874..147f81e0c 100644
--- a/host/lib/rfnoc/ctrl_iface.cpp
+++ b/host/lib/rfnoc/ctrl_iface.cpp
@@ -5,15 +5,14 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "ctrl_iface.hpp"
 #include <uhd/exception.hpp>
-
 #include <uhd/utils/byteswap.hpp>
 #include <uhd/utils/safe_call.hpp>
 #include <uhd/transport/bounded_buffer.hpp>
 #include <uhd/types/sid.hpp>
 #include <uhd/transport/chdr.hpp>
 #include <uhd/rfnoc/constants.hpp>
+#include <uhdlib/rfnoc/ctrl_iface.hpp>
 #include <boost/thread/mutex.hpp>
 #include <boost/thread/thread.hpp>
 #include <boost/format.hpp>
diff --git a/host/lib/rfnoc/ddc_block_ctrl_impl.cpp b/host/lib/rfnoc/ddc_block_ctrl_impl.cpp
index 6b28fcb63..2919c163b 100644
--- a/host/lib/rfnoc/ddc_block_ctrl_impl.cpp
+++ b/host/lib/rfnoc/ddc_block_ctrl_impl.cpp
@@ -4,7 +4,6 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "dsp_core_utils.hpp"
 #include <uhd/rfnoc/ddc_block_ctrl.hpp>
 #include <uhd/utils/log.hpp>
 #include <uhd/convert.hpp>
@@ -12,6 +11,7 @@
 #include <uhdlib/utils/math.hpp>
 #include <uhdlib/utils/narrow.hpp>
 #include <uhdlib/utils/compat_check.hpp>
+#include <uhdlib/usrp/cores/dsp_core_utils.hpp>
 #include <boost/math/special_functions/round.hpp>
 #include <cmath>
 
diff --git a/host/lib/rfnoc/dma_fifo_block_ctrl_impl.cpp b/host/lib/rfnoc/dma_fifo_block_ctrl_impl.cpp
index dc16bcce7..cbbd59323 100644
--- a/host/lib/rfnoc/dma_fifo_block_ctrl_impl.cpp
+++ b/host/lib/rfnoc/dma_fifo_block_ctrl_impl.cpp
@@ -6,11 +6,11 @@
 //
 
 #include <uhd/rfnoc/dma_fifo_block_ctrl.hpp>
-#include "dma_fifo_core_3000.hpp"
-#include "wb_iface_adapter.hpp"
 #include <uhd/convert.hpp>
 #include <uhd/utils/log.hpp>
 #include <uhd/types/wb_iface.hpp>
+#include <uhdlib/rfnoc/wb_iface_adapter.hpp>
+#include <uhdlib/usrp/cores/dma_fifo_core_3000.hpp>
 #include <boost/make_shared.hpp>
 #include <boost/thread/mutex.hpp>
 #include <boost/format.hpp>
diff --git a/host/lib/rfnoc/duc_block_ctrl_impl.cpp b/host/lib/rfnoc/duc_block_ctrl_impl.cpp
index e9567adb9..68109ec26 100644
--- a/host/lib/rfnoc/duc_block_ctrl_impl.cpp
+++ b/host/lib/rfnoc/duc_block_ctrl_impl.cpp
@@ -4,7 +4,6 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "dsp_core_utils.hpp"
 #include <uhd/rfnoc/duc_block_ctrl.hpp>
 #include <uhd/utils/log.hpp>
 #include <uhd/convert.hpp>
@@ -12,6 +11,7 @@
 #include <uhdlib/utils/compat_check.hpp>
 #include <uhdlib/utils/math.hpp>
 #include <uhdlib/utils/narrow.hpp>
+#include <uhdlib/usrp/cores/dsp_core_utils.hpp>
 #include <boost/math/special_functions/round.hpp>
 #include <cmath>
 
diff --git a/host/lib/rfnoc/graph_impl.cpp b/host/lib/rfnoc/graph_impl.cpp
index 20862333b..c361ea8f2 100644
--- a/host/lib/rfnoc/graph_impl.cpp
+++ b/host/lib/rfnoc/graph_impl.cpp
@@ -5,10 +5,10 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "graph_impl.hpp"
 #include <uhd/rfnoc/source_block_ctrl_base.hpp>
 #include <uhd/rfnoc/sink_block_ctrl_base.hpp>
 #include <uhd/utils/log.hpp>
+#include <uhdlib/rfnoc/graph_impl.hpp>
 
 using namespace uhd::rfnoc;
 
diff --git a/host/lib/rfnoc/legacy_compat.cpp b/host/lib/rfnoc/legacy_compat.cpp
index 5e62c69da..f6e3d5eb5 100644
--- a/host/lib/rfnoc/legacy_compat.cpp
+++ b/host/lib/rfnoc/legacy_compat.cpp
@@ -5,7 +5,6 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "legacy_compat.hpp"
 #include "../usrp/device3/device3_impl.hpp"
 #include <uhd/property_tree.hpp>
 #include <uhd/rfnoc/radio_ctrl.hpp>
@@ -16,10 +15,10 @@
 #include <uhd/types/stream_cmd.hpp>
 #include <uhd/types/direction.hpp>
 #include <uhd/types/ranges.hpp>
-
 #include <uhd/utils/log.hpp>
 #include <uhd/transport/chdr.hpp>
 #include <uhd/usrp/multi_usrp.hpp>
+#include <uhdlib/rfnoc/legacy_compat.hpp>
 #include <boost/make_shared.hpp>
 #include <boost/assign.hpp>
 
diff --git a/host/lib/rfnoc/radio_ctrl_impl.cpp b/host/lib/rfnoc/radio_ctrl_impl.cpp
index c0b9a0f82..1de854266 100644
--- a/host/lib/rfnoc/radio_ctrl_impl.cpp
+++ b/host/lib/rfnoc/radio_ctrl_impl.cpp
@@ -5,13 +5,13 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "wb_iface_adapter.hpp"
 #include <boost/format.hpp>
 #include <uhd/convert.hpp>
 #include <uhd/utils/log.hpp>
 #include <uhd/types/ranges.hpp>
 #include <uhd/types/direction.hpp>
-#include "radio_ctrl_impl.hpp"
+#include <uhdlib/rfnoc/wb_iface_adapter.hpp>
+#include <uhdlib/rfnoc/radio_ctrl_impl.hpp>
 #include "../../transport/super_recv_packet_handler.hpp"
 #include <tuple>
 
diff --git a/host/lib/rfnoc/rx_stream_terminator.cpp b/host/lib/rfnoc/rx_stream_terminator.cpp
index c43602cef..83c0420e2 100644
--- a/host/lib/rfnoc/rx_stream_terminator.cpp
+++ b/host/lib/rfnoc/rx_stream_terminator.cpp
@@ -5,11 +5,11 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "rx_stream_terminator.hpp"
-#include "radio_ctrl_impl.hpp"
 #include "../transport/super_recv_packet_handler.hpp"
 #include <uhd/utils/log.hpp>
 #include <uhd/rfnoc/source_node_ctrl.hpp>
+#include <uhdlib/rfnoc/rx_stream_terminator.hpp>
+#include <uhdlib/rfnoc/radio_ctrl_impl.hpp>
 #include <boost/format.hpp>
 
 using namespace uhd::rfnoc;
diff --git a/host/lib/rfnoc/sink_block_ctrl_base.cpp b/host/lib/rfnoc/sink_block_ctrl_base.cpp
index d619f1f8a..b620f917f 100644
--- a/host/lib/rfnoc/sink_block_ctrl_base.cpp
+++ b/host/lib/rfnoc/sink_block_ctrl_base.cpp
@@ -5,10 +5,10 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "utils.hpp"
 #include <uhd/rfnoc/sink_block_ctrl_base.hpp>
 #include <uhd/rfnoc/constants.hpp>
 #include <uhd/utils/log.hpp>
+#include <uhdlib/rfnoc/utils.hpp>
 
 using namespace uhd;
 using namespace uhd::rfnoc;
diff --git a/host/lib/rfnoc/sink_node_ctrl.cpp b/host/lib/rfnoc/sink_node_ctrl.cpp
index 56b95f4c1..03e259783 100644
--- a/host/lib/rfnoc/sink_node_ctrl.cpp
+++ b/host/lib/rfnoc/sink_node_ctrl.cpp
@@ -5,10 +5,10 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "utils.hpp"
 #include <uhd/utils/log.hpp>
 #include <uhd/rfnoc/sink_node_ctrl.hpp>
 #include <uhd/rfnoc/source_node_ctrl.hpp>
+#include <uhdlib/rfnoc/utils.hpp>
 
 using namespace uhd::rfnoc;
 
diff --git a/host/lib/rfnoc/source_block_ctrl_base.cpp b/host/lib/rfnoc/source_block_ctrl_base.cpp
index b7683840f..d71905a1f 100644
--- a/host/lib/rfnoc/source_block_ctrl_base.cpp
+++ b/host/lib/rfnoc/source_block_ctrl_base.cpp
@@ -5,10 +5,10 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "utils.hpp"
 #include <uhd/rfnoc/source_block_ctrl_base.hpp>
 #include <uhd/utils/log.hpp>
 #include <uhd/rfnoc/constants.hpp>
+#include <uhdlib/rfnoc/utils.hpp>
 
 using namespace uhd;
 using namespace uhd::rfnoc;
diff --git a/host/lib/rfnoc/source_node_ctrl.cpp b/host/lib/rfnoc/source_node_ctrl.cpp
index 91f114b60..54e65b16c 100644
--- a/host/lib/rfnoc/source_node_ctrl.cpp
+++ b/host/lib/rfnoc/source_node_ctrl.cpp
@@ -5,10 +5,10 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "utils.hpp"
 #include <uhd/utils/log.hpp>
 #include <uhd/rfnoc/source_node_ctrl.hpp>
 #include <uhd/rfnoc/sink_node_ctrl.hpp>
+#include <uhdlib/rfnoc/utils.hpp>
 
 using namespace uhd::rfnoc;
 
diff --git a/host/lib/rfnoc/tx_stream_terminator.cpp b/host/lib/rfnoc/tx_stream_terminator.cpp
index 4064d8eb9..14e800a1c 100644
--- a/host/lib/rfnoc/tx_stream_terminator.cpp
+++ b/host/lib/rfnoc/tx_stream_terminator.cpp
@@ -5,9 +5,9 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "tx_stream_terminator.hpp"
-#include <boost/format.hpp>
 #include <uhd/rfnoc/sink_node_ctrl.hpp>
+#include <uhdlib/rfnoc/tx_stream_terminator.hpp>
+#include <boost/format.hpp>
 
 using namespace uhd::rfnoc;
 
diff --git a/host/lib/rfnoc/wb_iface_adapter.cpp b/host/lib/rfnoc/wb_iface_adapter.cpp
index 1749f3635..00e2b466a 100644
--- a/host/lib/rfnoc/wb_iface_adapter.cpp
+++ b/host/lib/rfnoc/wb_iface_adapter.cpp
@@ -5,7 +5,7 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "wb_iface_adapter.hpp"
+#include <uhdlib/rfnoc/wb_iface_adapter.hpp>
 
 using namespace uhd::rfnoc;
 
diff --git a/host/lib/transport/super_recv_packet_handler.hpp b/host/lib/transport/super_recv_packet_handler.hpp
index f202eab54..b66972f4f 100644
--- a/host/lib/transport/super_recv_packet_handler.hpp
+++ b/host/lib/transport/super_recv_packet_handler.hpp
@@ -8,7 +8,6 @@
 #ifndef INCLUDED_LIBUHD_TRANSPORT_SUPER_RECV_PACKET_HANDLER_HPP
 #define INCLUDED_LIBUHD_TRANSPORT_SUPER_RECV_PACKET_HANDLER_HPP
 
-#include "../rfnoc/rx_stream_terminator.hpp"
 #include <uhd/config.hpp>
 #include <uhd/exception.hpp>
 #include <uhd/convert.hpp>
@@ -19,6 +18,7 @@
 #include <uhd/types/metadata.hpp>
 #include <uhd/transport/vrt_if_packet.hpp>
 #include <uhd/transport/zero_copy.hpp>
+#include <uhdlib/rfnoc/rx_stream_terminator.hpp>
 #include <boost/dynamic_bitset.hpp>
 #include <boost/function.hpp>
 #include <boost/format.hpp>
diff --git a/host/lib/transport/super_send_packet_handler.hpp b/host/lib/transport/super_send_packet_handler.hpp
index 0306d2171..9c18e2080 100644
--- a/host/lib/transport/super_send_packet_handler.hpp
+++ b/host/lib/transport/super_send_packet_handler.hpp
@@ -8,7 +8,6 @@
 #ifndef INCLUDED_LIBUHD_TRANSPORT_SUPER_SEND_PACKET_HANDLER_HPP
 #define INCLUDED_LIBUHD_TRANSPORT_SUPER_SEND_PACKET_HANDLER_HPP
 
-#include "../rfnoc/tx_stream_terminator.hpp"
 #include <uhd/config.hpp>
 #include <uhd/exception.hpp>
 #include <uhd/convert.hpp>
@@ -20,6 +19,7 @@
 #include <uhd/types/metadata.hpp>
 #include <uhd/transport/vrt_if_packet.hpp>
 #include <uhd/transport/zero_copy.hpp>
+#include <uhdlib/rfnoc/tx_stream_terminator.hpp>
 #include <boost/thread/thread.hpp>
 #include <boost/thread/thread_time.hpp>
 #include <boost/function.hpp>
diff --git a/host/lib/usrp/b100/b100_impl.cpp b/host/lib/usrp/b100/b100_impl.cpp
index 8f9f5c15f..6f649b0eb 100644
--- a/host/lib/usrp/b100/b100_impl.cpp
+++ b/host/lib/usrp/b100/b100_impl.cpp
@@ -5,7 +5,6 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "apply_corrections.hpp"
 #include "b100_impl.hpp"
 #include "b100_regs.hpp"
 #include <uhd/transport/usb_control.hpp>
@@ -15,6 +14,7 @@
 #include <uhd/utils/static.hpp>
 #include <uhd/utils/paths.hpp>
 #include <uhd/utils/safe_call.hpp>
+#include <uhdlib/usrp/common/apply_corrections.hpp>
 #include <boost/format.hpp>
 #include <boost/assign/list_of.hpp>
 #include <boost/filesystem.hpp>
diff --git a/host/lib/usrp/b100/b100_impl.hpp b/host/lib/usrp/b100/b100_impl.hpp
index dc4b43040..c6947deb7 100644
--- a/host/lib/usrp/b100/b100_impl.hpp
+++ b/host/lib/usrp/b100/b100_impl.hpp
@@ -8,18 +8,8 @@
 #ifndef INCLUDED_B100_IMPL_HPP
 #define INCLUDED_B100_IMPL_HPP
 
-#include "fx2_ctrl.hpp"
 #include "clock_ctrl.hpp"
 #include "codec_ctrl.hpp"
-#include "i2c_core_200.hpp"
-#include "rx_frontend_core_200.hpp"
-#include "tx_frontend_core_200.hpp"
-#include "rx_dsp_core_200.hpp"
-#include "tx_dsp_core_200.hpp"
-#include "time64_core_200.hpp"
-#include "fifo_ctrl_excelsior.hpp"
-#include "user_settings_core_200.hpp"
-#include "recv_packet_demuxer_3000.hpp"
 #include <uhd/device.hpp>
 #include <uhd/property_tree.hpp>
 #include <uhd/types/dict.hpp>
@@ -31,6 +21,16 @@
 #include <uhd/usrp/dboard_eeprom.hpp>
 #include <uhd/usrp/dboard_manager.hpp>
 #include <uhd/transport/usb_zero_copy.hpp>
+#include <uhdlib/usrp/common/fifo_ctrl_excelsior.hpp>
+#include <uhdlib/usrp/common/fx2_ctrl.hpp>
+#include <uhdlib/usrp/common/recv_packet_demuxer_3000.hpp>
+#include <uhdlib/usrp/cores/i2c_core_200.hpp>
+#include <uhdlib/usrp/cores/rx_frontend_core_200.hpp>
+#include <uhdlib/usrp/cores/tx_frontend_core_200.hpp>
+#include <uhdlib/usrp/cores/rx_dsp_core_200.hpp>
+#include <uhdlib/usrp/cores/tx_dsp_core_200.hpp>
+#include <uhdlib/usrp/cores/time64_core_200.hpp>
+#include <uhdlib/usrp/cores/user_settings_core_200.hpp>
 #include <boost/weak_ptr.hpp>
 
 static const double          B100_LINK_RATE_BPS = 256e6/5; //pratical link rate (< 480 Mbps)
diff --git a/host/lib/usrp/b100/dboard_iface.cpp b/host/lib/usrp/b100/dboard_iface.cpp
index 0820d1427..2ea467fe4 100644
--- a/host/lib/usrp/b100/dboard_iface.cpp
+++ b/host/lib/usrp/b100/dboard_iface.cpp
@@ -5,17 +5,16 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "gpio_core_200.hpp"
-#include <uhd/types/serial.hpp>
 #include "b100_regs.hpp"
 #include "clock_ctrl.hpp"
 #include "codec_ctrl.hpp"
+#include <uhd/types/serial.hpp>
 #include <uhd/usrp/dboard_iface.hpp>
 #include <uhd/types/dict.hpp>
 #include <uhd/exception.hpp>
+#include <uhdlib/usrp/cores/gpio_core_200.hpp>
 #include <boost/assign/list_of.hpp>
 
-
 using namespace uhd;
 using namespace uhd::usrp;
 using namespace boost::assign;
diff --git a/host/lib/usrp/b100/io_impl.cpp b/host/lib/usrp/b100/io_impl.cpp
index f6c5c3fb0..ed90b11ba 100644
--- a/host/lib/usrp/b100/io_impl.cpp
+++ b/host/lib/usrp/b100/io_impl.cpp
@@ -5,16 +5,16 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "validate_subdev_spec.hpp"
+#include "b100_impl.hpp"
+#include <uhd/utils/log.hpp>
+#include <uhdlib/usrp/common/validate_subdev_spec.hpp>
 #include "../../transport/super_recv_packet_handler.hpp"
 #include "../../transport/super_send_packet_handler.hpp"
-#include "b100_impl.hpp"
+
 #include <boost/bind.hpp>
 #include <boost/format.hpp>
 #include <boost/bind.hpp>
 #include <boost/thread.hpp>
-
-#include <uhd/utils/log.hpp>
 #include <boost/make_shared.hpp>
 
 using namespace uhd;
diff --git a/host/lib/usrp/b100/mb_eeprom.cpp b/host/lib/usrp/b100/mb_eeprom.cpp
index e353ceec4..3e46d7d1f 100644
--- a/host/lib/usrp/b100/mb_eeprom.cpp
+++ b/host/lib/usrp/b100/mb_eeprom.cpp
@@ -5,7 +5,7 @@
 //
 
 #include "b100_impl.hpp"
-#include "eeprom_utils.hpp"
+#include <uhdlib/utils/eeprom_utils.hpp>
 #include <uhd/usrp/mboard_eeprom.hpp>
 
 namespace {
diff --git a/host/lib/usrp/b200/b200_cores.hpp b/host/lib/usrp/b200/b200_cores.hpp
index 2227ca3ea..4d327f8f6 100644
--- a/host/lib/usrp/b200/b200_cores.hpp
+++ b/host/lib/usrp/b200/b200_cores.hpp
@@ -8,8 +8,8 @@
 #ifndef INCLUDED_B200_CORES_HPP
 #define INCLUDED_B200_CORES_HPP
 
-#include "spi_core_3000.hpp"
-#include "adf4001_ctrl.hpp"
+#include <uhdlib/usrp/cores/spi_core_3000.hpp>
+#include <uhdlib/usrp/common/adf4001_ctrl.hpp>
 #include <boost/thread/mutex.hpp>
 
 class b200_local_spi_core : boost::noncopyable, public uhd::spi_iface {
diff --git a/host/lib/usrp/b200/b200_iface.cpp b/host/lib/usrp/b200/b200_iface.cpp
index 2b20adf1a..836a92ff7 100644
--- a/host/lib/usrp/b200/b200_iface.cpp
+++ b/host/lib/usrp/b200/b200_iface.cpp
@@ -7,22 +7,22 @@
 
 #include "b200_iface.hpp"
 
-#include "../../utils/ihex.hpp"
 #include <uhd/config.hpp>
-
 #include <uhd/utils/log.hpp>
 #include <uhd/exception.hpp>
+#include <uhdlib/utils/ihex.hpp>
+
 #include <boost/functional/hash.hpp>
 #include <boost/thread/thread.hpp>
-#include <stdint.h>
 #include <boost/lexical_cast.hpp>
 #include <boost/format.hpp>
+#include <libusb.h>
 #include <fstream>
 #include <string>
 #include <vector>
 #include <cstring>
 #include <iomanip>
-#include <libusb.h>
+#include <stdint.h>
 
 //! libusb_error_name is only in newer API
 #ifndef HAVE_LIBUSB_ERROR_NAME
diff --git a/host/lib/usrp/b200/b200_iface.hpp b/host/lib/usrp/b200/b200_iface.hpp
index e5f11840c..86307bc21 100644
--- a/host/lib/usrp/b200/b200_iface.hpp
+++ b/host/lib/usrp/b200/b200_iface.hpp
@@ -8,14 +8,14 @@
 #ifndef INCLUDED_B200_IFACE_HPP
 #define INCLUDED_B200_IFACE_HPP
 
-#include <stdint.h>
 #include <uhd/transport/usb_control.hpp>
 #include <uhd/types/serial.hpp> //i2c iface
 #include <uhd/types/dict.hpp>
+#include <uhdlib/usrp/common/ad9361_ctrl.hpp>
 #include <boost/assign/list_of.hpp>
 #include <boost/shared_ptr.hpp>
 #include <boost/utility.hpp>
-#include "ad9361_ctrl.hpp"
+#include <stdint.h>
 
 enum b200_product_t {
     B200,
diff --git a/host/lib/usrp/b200/b200_impl.hpp b/host/lib/usrp/b200/b200_impl.hpp
index 9abe031b1..13d282959 100644
--- a/host/lib/usrp/b200/b200_impl.hpp
+++ b/host/lib/usrp/b200/b200_impl.hpp
@@ -11,16 +11,6 @@
 #include "b200_iface.hpp"
 #include "b200_uart.hpp"
 #include "b200_cores.hpp"
-#include "ad9361_ctrl.hpp"
-#include "ad936x_manager.hpp"
-#include "adf4001_ctrl.hpp"
-#include "rx_vita_core_3000.hpp"
-#include "tx_vita_core_3000.hpp"
-#include "time_core_3000.hpp"
-#include "gpio_atr_3000.hpp"
-#include "radio_ctrl_core_3000.hpp"
-#include "rx_dsp_core_3000.hpp"
-#include "tx_dsp_core_3000.hpp"
 #include <uhd/device.hpp>
 #include <uhd/property_tree.hpp>
 #include <uhd/utils/pimpl.hpp>
@@ -34,9 +24,20 @@
 #include <uhd/usrp/gps_ctrl.hpp>
 #include <uhd/transport/usb_zero_copy.hpp>
 #include <uhd/transport/bounded_buffer.hpp>
+#include <uhdlib/usrp/common/ad9361_ctrl.hpp>
+#include <uhdlib/usrp/cores/rx_vita_core_3000.hpp>
+#include <uhdlib/usrp/cores/tx_vita_core_3000.hpp>
+#include <uhdlib/usrp/cores/time_core_3000.hpp>
+#include <uhdlib/usrp/cores/gpio_atr_3000.hpp>
+#include <uhdlib/usrp/cores/radio_ctrl_core_3000.hpp>
+#include <uhdlib/usrp/cores/rx_dsp_core_3000.hpp>
+#include <uhdlib/usrp/cores/tx_dsp_core_3000.hpp>
+#include <uhdlib/usrp/common/recv_packet_demuxer_3000.hpp>
+#include <uhdlib/usrp/common/ad936x_manager.hpp>
+#include <uhdlib/usrp/common/adf4001_ctrl.hpp>
 #include <boost/assign.hpp>
 #include <boost/weak_ptr.hpp>
-#include "recv_packet_demuxer_3000.hpp"
+
 static const uint8_t  B200_FW_COMPAT_NUM_MAJOR = 8;
 static const uint8_t  B200_FW_COMPAT_NUM_MINOR = 0;
 static const uint16_t B200_FPGA_COMPAT_NUM = 14;
diff --git a/host/lib/usrp/b200/b200_io_impl.cpp b/host/lib/usrp/b200/b200_io_impl.cpp
index c589aacb0..b40ea5d82 100644
--- a/host/lib/usrp/b200/b200_io_impl.cpp
+++ b/host/lib/usrp/b200/b200_io_impl.cpp
@@ -7,10 +7,10 @@
 
 #include "b200_regs.hpp"
 #include "b200_impl.hpp"
-#include "validate_subdev_spec.hpp"
+#include <uhdlib/usrp/common/validate_subdev_spec.hpp>
+#include <uhdlib/usrp/common/async_packet_handler.hpp>
 #include "../../transport/super_recv_packet_handler.hpp"
 #include "../../transport/super_send_packet_handler.hpp"
-#include "async_packet_handler.hpp"
 #include <uhd/utils/math.hpp>
 #include <boost/bind.hpp>
 #include <boost/make_shared.hpp>
diff --git a/host/lib/usrp/b200/b200_mb_eeprom.cpp b/host/lib/usrp/b200/b200_mb_eeprom.cpp
index a7f51f6d9..2be014fd5 100644
--- a/host/lib/usrp/b200/b200_mb_eeprom.cpp
+++ b/host/lib/usrp/b200/b200_mb_eeprom.cpp
@@ -5,7 +5,7 @@
 //
 
 #include "b200_impl.hpp"
-#include "eeprom_utils.hpp"
+#include <uhdlib/utils/eeprom_utils.hpp>
 #include <uhd/usrp/mboard_eeprom.hpp>
 
 namespace {
diff --git a/host/lib/usrp/common/CMakeLists.txt b/host/lib/usrp/common/CMakeLists.txt
index dca3663bb..9e27fb880 100644
--- a/host/lib/usrp/common/CMakeLists.txt
+++ b/host/lib/usrp/common/CMakeLists.txt
@@ -33,5 +33,4 @@ LIBUHD_APPEND_SOURCES(
     ${CMAKE_CURRENT_SOURCE_DIR}/validate_subdev_spec.cpp
     ${CMAKE_CURRENT_SOURCE_DIR}/recv_packet_demuxer.cpp
     ${CMAKE_CURRENT_SOURCE_DIR}/fifo_ctrl_excelsior.cpp
-    ${CMAKE_CURRENT_SOURCE_DIR}/lmk04828.cpp
 )
diff --git a/host/lib/usrp/common/ad9361_ctrl.cpp b/host/lib/usrp/common/ad9361_ctrl.cpp
index a6f219185..ea3fdc416 100644
--- a/host/lib/usrp/common/ad9361_ctrl.cpp
+++ b/host/lib/usrp/common/ad9361_ctrl.cpp
@@ -5,16 +5,16 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "ad9361_ctrl.hpp"
 #include <uhd/types/ranges.hpp>
 #include <uhd/utils/log.hpp>
 #include <uhd/types/serial.hpp>
-#include <cstring>
+#include <uhdlib/usrp/common/ad9361_ctrl.hpp>
 #include <boost/format.hpp>
 #include <boost/utility.hpp>
 #include <boost/function.hpp>
 #include <boost/make_shared.hpp>
 #include <boost/thread.hpp>
+#include <cstring>
 
 using namespace uhd;
 using namespace uhd::usrp;
diff --git a/host/lib/usrp/common/ad936x_manager.cpp b/host/lib/usrp/common/ad936x_manager.cpp
index 34e51ec0e..9d07350ea 100644
--- a/host/lib/usrp/common/ad936x_manager.cpp
+++ b/host/lib/usrp/common/ad936x_manager.cpp
@@ -5,7 +5,7 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "ad936x_manager.hpp"
+#include <uhdlib/usrp/common/ad936x_manager.hpp>
 #include <uhd/utils/log.hpp>
 #include <boost/functional/hash.hpp>
 #include <boost/thread/thread.hpp>
diff --git a/host/lib/usrp/common/adf4001_ctrl.cpp b/host/lib/usrp/common/adf4001_ctrl.cpp
index 5fb9fd223..138ca7f81 100644
--- a/host/lib/usrp/common/adf4001_ctrl.cpp
+++ b/host/lib/usrp/common/adf4001_ctrl.cpp
@@ -10,9 +10,9 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "adf4001_ctrl.hpp"
-
+#include <uhdlib/usrp/common/adf4001_ctrl.hpp>
 #include <uhd/utils/log.hpp>
+
 #include <iostream>
 #include <iomanip>
 
diff --git a/host/lib/usrp/common/adf435x.cpp b/host/lib/usrp/common/adf435x.cpp
index d1d533ad2..6d59befaa 100644
--- a/host/lib/usrp/common/adf435x.cpp
+++ b/host/lib/usrp/common/adf435x.cpp
@@ -5,7 +5,7 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "adf435x.hpp"
+#include <uhdlib/usrp/common/adf435x.hpp>
 
 using namespace uhd;
 
diff --git a/host/lib/usrp/common/adf535x.cpp b/host/lib/usrp/common/adf535x.cpp
index 4885f4b5a..67a94bcc1 100644
--- a/host/lib/usrp/common/adf535x.cpp
+++ b/host/lib/usrp/common/adf535x.cpp
@@ -4,7 +4,7 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "adf535x.hpp"
+#include <uhdlib/usrp/common/adf535x.hpp>
 
 adf535x_iface::sptr adf535x_iface::make_adf5355(write_fn_t write)
 {
diff --git a/host/lib/usrp/common/apply_corrections.cpp b/host/lib/usrp/common/apply_corrections.cpp
index 3d7127bfe..5c606c338 100644
--- a/host/lib/usrp/common/apply_corrections.cpp
+++ b/host/lib/usrp/common/apply_corrections.cpp
@@ -5,7 +5,7 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "apply_corrections.hpp"
+#include <uhdlib/usrp/common/apply_corrections.hpp>
 #include <uhd/usrp/dboard_eeprom.hpp>
 #include <uhd/utils/paths.hpp>
 #include <uhd/utils/log.hpp>
diff --git a/host/lib/usrp/common/fifo_ctrl_excelsior.cpp b/host/lib/usrp/common/fifo_ctrl_excelsior.cpp
index b25b76f6b..e110919f9 100644
--- a/host/lib/usrp/common/fifo_ctrl_excelsior.cpp
+++ b/host/lib/usrp/common/fifo_ctrl_excelsior.cpp
@@ -5,8 +5,8 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "fifo_ctrl_excelsior.hpp"
-#include "async_packet_handler.hpp"
+#include <uhdlib/usrp/common/fifo_ctrl_excelsior.hpp>
+#include <uhdlib/usrp/common/async_packet_handler.hpp>
 #include <uhd/exception.hpp>
 #include <uhd/utils/log.hpp>
 #include <uhd/utils/byteswap.hpp>
diff --git a/host/lib/usrp/common/fx2_ctrl.cpp b/host/lib/usrp/common/fx2_ctrl.cpp
index 3d8ff6e67..6e1b374ca 100644
--- a/host/lib/usrp/common/fx2_ctrl.cpp
+++ b/host/lib/usrp/common/fx2_ctrl.cpp
@@ -5,7 +5,7 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "fx2_ctrl.hpp"
+#include <uhdlib/usrp/common/fx2_ctrl.hpp>
 #include <uhd/utils/log.hpp>
 #include <uhd/exception.hpp>
 #include <uhd/transport/usb_control.hpp>
diff --git a/host/lib/usrp/common/lmk04828.cpp b/host/lib/usrp/common/lmk04828.cpp
deleted file mode 100644
index 46766e8d2..000000000
--- a/host/lib/usrp/common/lmk04828.cpp
+++ /dev/null
@@ -1,86 +0,0 @@
-//
-// Copyright 2017 Ettus Research, a National Instruments Company
-//
-// SPDX-License-Identifier: GPL-3.0-or-later
-//
-
-#include "lmk04828.hpp"
-#include "lmk04828_regs.hpp"
-#include "uhd/exception.hpp"
-#include <iostream>
-
-using namespace uhd;
-
-
-lmk04828_iface::lmk04828_iface(write_fn_t write_fn, read_fn_t read_fn) : _write_fn(write_fn), _read_fn(read_fn)
-{
-
-}
-
-bool lmk04828_iface::verify_chip_id()
-{
-    // Check ID Device Type, ID Prod, and ID Maskrev registers
-    uint8_t id_device_type = get_chip_id();
-
-    std::cout << "LMK device ID: " << int(id_device_type) << std::endl;
-
-    // assert(id_device_type == 6);
-    if (id_device_type != 6){
-        std::cout << "id_device_type is not 6!" << std::endl;
-        return false;
-    }
-
-    return true;
-}
-
-uint8_t lmk04828_iface::get_chip_id(){
-    uint8_t id_device_type = _read_fn(3);
-    return id_device_type;
-}
-
-void lmk04828_iface::init()
-{
-    // Configure the LMK to start producing clocks
-// TODO: Convert to use ic_reg_map fields once values are finalized/working
-    std::vector<uint16_t> write_addrs = {
-        0x000000,0x000000,0x000002,0x000149,0x00014A,0x000100,0x000101,0x000103,0x000104,0x000105,0x000106,0x000107,0x000120,0x000121,0x000123,0x000124,0x000125,0x000126,0x000127,0x000130,0x000131,0x000133,0x000134,0x000135,0x000136,0x000137,0x000128,0x000129,0x00012B,0x00012C,0x00012D,0x00012E,0x00012F,0x000108,0x000109,0x00010B,0x00010C,0x00010D,0x00010E,0x00010F,0x000118,0x000119,0x00011B,0x00011C,0x00011D,0x00011E,0x00011F,0x000138,0x00013F,0x000140,0x000144,0x000146,0x000147,0x00014B,0x00014C,0x000153,0x000154,0x000155,0x000156,0x000157,0x000158,0x000159,0x00015A,0x00015B,0x00015E,0x000160,0x000161,0x000162,0x000163,0x000164,0x000165,0x000166,0x000167,0x000168,0x00016E,0x000173,0x000169,0x00016C,0x00016D};
-
-    std::vector<uint8_t> write_data = {
-        0x000090,0x000010,0x000000,0x000040,0x000033,0x000078,0x000055,0x000000,0x000020,0x000000,0x0000F1,0x000055,0x000078,0x000055,0x000000,0x000020,0x000000,0x0000F1,0x000055,0x000078,0x000055,0x000000,0x000020,0x000000,0x0000F1,0x000005,0x000078,0x000055,0x000000,0x000000,0x000000,0x0000F0,0x000050,0x00007E,0x000055,0x000000,0x000000,0x000000,0x0000F0,0x000055,0x000078,0x000055,0x000000,0x000020,0x000000,0x0000F1,0x000000,0x000030,0x000009,0x000000,0x000000,0x000010,0x00001A,0x00000D,0x0000F6,0x000000,0x000001,0x000000,0x00000A,0x000000,0x000001,0x000000,0x00007D,0x0000DB,0x000000,0x000000,0x000004,0x0000A0,0x000000,0x000000,0x000019,0x000000,0x000000,0x000019,0x00006B,0x000000,0x000051,0x000000,0x000000};
-
-    std::vector<uint32_t> writes {};
-    for (size_t index = 0; index < write_addrs.size(); index++) {
-        writes.push_back((write_addrs[index] << 8) | write_data[index]); 
-    }
-
-    std::cout << "LMK Initialization writes" << std::endl;
-    for (uint32_t reg : writes) {
-        std::cout << std::hex << reg << " "; 
-    }
-    std::cout << std::endl;
-
-    _write_fn(writes);
-
-    if (!verify_chip_id()) {
-        throw uhd::runtime_error("LMK ID not correct!");
-    }
-}
-
-void lmk04828_iface::enable_sysref_pulse()
-{
-    // Configure the LMK to issue a single SysRef pulse each time SYNC is asserted
-
-    // TODO: Convert to use ic reg map fields once functional
-    // Addr 0x139 Value 0x2
-    // Addr 0x144 Value 0xFF
-    // Addr 0x143 Value 0x52
-
-    std::vector<uint32_t> writes = {
-        (0x139 << 11) | 0x2,
-        (0x144 << 11) | 0xFF,
-        (0x143 << 11) | 0x52
-    };
-
-    _write_fn(writes);
-}
-
diff --git a/host/lib/usrp/common/lmk04828.hpp b/host/lib/usrp/common/lmk04828.hpp
deleted file mode 100644
index e2f1b8669..000000000
--- a/host/lib/usrp/common/lmk04828.hpp
+++ /dev/null
@@ -1,56 +0,0 @@
-//
-// Copyright 2017 Ettus Research, a National Instruments Company
-//
-// SPDX-License-Identifier: GPL-3.0-or-later
-//
-
-#ifndef INCLUDE_LMK04828_HPP
-#define INCLUDE_LMK04828_HPP
-
-#include <boost/function.hpp>
-#include <boost/shared_ptr.hpp>
-#include <vector>
-#include <stdint.h>
-
-static const uint32_t LMK04828_ID_DEVICE_TYPE = 6;
-static const uint32_t LMK04828_ID_PROD_LSB    = 91;
-static const uint32_t LMK04828_ID_PROD_MSB    = 208;
-static const uint32_t LMK04828_ID_MASKREV     = 32;
-
-class lmk04828_iface
-{
-public:
-    typedef boost::shared_ptr<lmk04828_iface> sptr;
-    typedef boost::function<void(std::vector<uint32_t>)> write_fn_t;
-    typedef boost::function<uint8_t(uint32_t)> read_fn_t;
-
-    //static sptr (write_fn_t write_fn, read_fn_t read_fn);
-    lmk04828_iface(write_fn_t, read_fn_t);
-
-    ~lmk04828_iface() {}
-
-    //! Checks if the chip ID is what we expect
-    //
-    // Does not throw
-    //
-    // \returns false if chip ID is incorrect
-    bool verify_chip_id();
-
-    uint8_t get_chip_id();
-
-    void init();
-
-    /*! Enable SYSREF pulses
-     *
-     * After calling this, triggering the sync pin will emit a SYSREF pulse.
-     */
-    void enable_sysref_pulse();
-
-private:
-    // use IC Reg Map once values stabilize
-//    lmk04828_regs_t _regs;
-
-    write_fn_t _write_fn;
-    read_fn_t _read_fn;
-};
-#endif
diff --git a/host/lib/usrp/common/recv_packet_demuxer.cpp b/host/lib/usrp/common/recv_packet_demuxer.cpp
index 62d88d0ec..96eafa4be 100644
--- a/host/lib/usrp/common/recv_packet_demuxer.cpp
+++ b/host/lib/usrp/common/recv_packet_demuxer.cpp
@@ -5,12 +5,13 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "recv_packet_demuxer.hpp"
+#include <uhdlib/usrp/common/recv_packet_demuxer.hpp>
 #include <uhd/utils/log.hpp>
 #include <uhd/utils/byteswap.hpp>
-#include <boost/thread/mutex.hpp>
 #include <uhd/transport/vrt_if_packet.hpp>
 #include <uhd/types/metadata.hpp>
+
+#include <boost/thread/mutex.hpp>
 #include <queue>
 #include <deque>
 #include <vector>
diff --git a/host/lib/usrp/common/validate_subdev_spec.cpp b/host/lib/usrp/common/validate_subdev_spec.cpp
index 72e901929..369119e4a 100644
--- a/host/lib/usrp/common/validate_subdev_spec.cpp
+++ b/host/lib/usrp/common/validate_subdev_spec.cpp
@@ -5,7 +5,7 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "validate_subdev_spec.hpp"
+#include <uhdlib/usrp/common/validate_subdev_spec.hpp>
 #include <uhd/exception.hpp>
 #include <uhd/utils/assert_has.hpp>
 #include <boost/format.hpp>
diff --git a/host/lib/usrp/cores/CMakeLists.txt b/host/lib/usrp/cores/CMakeLists.txt
index 713c78a30..95102f29d 100644
--- a/host/lib/usrp/cores/CMakeLists.txt
+++ b/host/lib/usrp/cores/CMakeLists.txt
@@ -9,8 +9,6 @@
 # This file included, use CMake directory variables
 ########################################################################
 
-INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})
-
 IF(ENABLE_B100 OR ENABLE_USRP2)
     LIBUHD_APPEND_SOURCES(
         ${CMAKE_CURRENT_SOURCE_DIR}/gpio_core_200.cpp
@@ -22,7 +20,6 @@ IF(ENABLE_B100 OR ENABLE_USRP2)
     )
 ENDIF(ENABLE_B100 OR ENABLE_USRP2)
 
-
 LIBUHD_APPEND_SOURCES(
     ${CMAKE_CURRENT_SOURCE_DIR}/dma_fifo_core_3000.cpp
     ${CMAKE_CURRENT_SOURCE_DIR}/dsp_core_utils.cpp
diff --git a/host/lib/usrp/cores/dma_fifo_core_3000.cpp b/host/lib/usrp/cores/dma_fifo_core_3000.cpp
index d2d190af1..618f81f64 100644
--- a/host/lib/usrp/cores/dma_fifo_core_3000.cpp
+++ b/host/lib/usrp/cores/dma_fifo_core_3000.cpp
@@ -5,12 +5,13 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "dma_fifo_core_3000.hpp"
 #include <uhd/exception.hpp>
-#include <boost/thread/thread.hpp> //sleep
 #include <uhd/utils/soft_register.hpp>
 #include <uhd/utils/log.hpp>
+#include <uhdlib/usrp/cores/dma_fifo_core_3000.hpp>
 #include <boost/format.hpp>
+#include <boost/thread/thread.hpp> //sleep
+
 using namespace uhd;
 
 #define SR_DRAM_BIST_BASE 16
diff --git a/host/lib/usrp/cores/dsp_core_utils.cpp b/host/lib/usrp/cores/dsp_core_utils.cpp
index a37fea3bc..282073597 100644
--- a/host/lib/usrp/cores/dsp_core_utils.cpp
+++ b/host/lib/usrp/cores/dsp_core_utils.cpp
@@ -5,9 +5,9 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "dsp_core_utils.hpp"
 #include <uhd/utils/math.hpp>
 #include <uhd/exception.hpp>
+#include <uhdlib/usrp/cores/dsp_core_utils.hpp>
 #include <boost/math/special_functions/round.hpp>
 #include <boost/math/special_functions/sign.hpp>
 
diff --git a/host/lib/usrp/cores/gpio_atr_3000.cpp b/host/lib/usrp/cores/gpio_atr_3000.cpp
index 6e5df02ed..1cfbacfab 100644
--- a/host/lib/usrp/cores/gpio_atr_3000.cpp
+++ b/host/lib/usrp/cores/gpio_atr_3000.cpp
@@ -5,9 +5,9 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "gpio_atr_3000.hpp"
 #include <uhd/types/dict.hpp>
 #include <uhd/utils/soft_register.hpp>
+#include <uhdlib/usrp/cores/gpio_atr_3000.hpp>
 
 using namespace uhd;
 using namespace usrp;
diff --git a/host/lib/usrp/cores/gpio_core_200.cpp b/host/lib/usrp/cores/gpio_core_200.cpp
index 3cd3574e1..7df8e3c19 100644
--- a/host/lib/usrp/cores/gpio_core_200.cpp
+++ b/host/lib/usrp/cores/gpio_core_200.cpp
@@ -5,8 +5,8 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "gpio_core_200.hpp"
 #include <uhd/types/dict.hpp>
+#include <uhdlib/usrp/cores/gpio_core_200.hpp>
 
 #define REG_GPIO_IDLE          _base + 0
 #define REG_GPIO_RX_ONLY       _base + 4
diff --git a/host/lib/usrp/cores/i2c_core_100_wb32.cpp b/host/lib/usrp/cores/i2c_core_100_wb32.cpp
index 3f037f519..c6a0e8d84 100644
--- a/host/lib/usrp/cores/i2c_core_100_wb32.cpp
+++ b/host/lib/usrp/cores/i2c_core_100_wb32.cpp
@@ -5,9 +5,9 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "i2c_core_100_wb32.hpp"
 #include <uhd/exception.hpp>
 #include <uhd/utils/log.hpp>
+#include <uhdlib/usrp/cores/i2c_core_100_wb32.hpp>
 #include <boost/thread/thread.hpp> //sleep
 
 #define REG_I2C_PRESCALER_LO _base + 0
diff --git a/host/lib/usrp/cores/i2c_core_200.cpp b/host/lib/usrp/cores/i2c_core_200.cpp
index ce98f7512..c0a6cb949 100644
--- a/host/lib/usrp/cores/i2c_core_200.cpp
+++ b/host/lib/usrp/cores/i2c_core_200.cpp
@@ -5,9 +5,9 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "i2c_core_200.hpp"
 #include <uhd/exception.hpp>
 #include <uhd/utils/log.hpp>
+#include <uhdlib/usrp/cores/i2c_core_200.hpp>
 #include <boost/thread/thread.hpp> //sleep
 #include <boost/thread/mutex.hpp>
 
diff --git a/host/lib/usrp/cores/radio_ctrl_core_3000.cpp b/host/lib/usrp/cores/radio_ctrl_core_3000.cpp
index 631291d18..fe4a01b35 100644
--- a/host/lib/usrp/cores/radio_ctrl_core_3000.cpp
+++ b/host/lib/usrp/cores/radio_ctrl_core_3000.cpp
@@ -5,14 +5,14 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "radio_ctrl_core_3000.hpp"
-#include "async_packet_handler.hpp"
 #include <uhd/exception.hpp>
 #include <uhd/utils/log.hpp>
 #include <uhd/utils/byteswap.hpp>
 #include <uhd/utils/safe_call.hpp>
 #include <uhd/transport/bounded_buffer.hpp>
 #include <uhd/transport/vrt_if_packet.hpp>
+#include <uhdlib/usrp/common/async_packet_handler.hpp>
+#include <uhdlib/usrp/cores/radio_ctrl_core_3000.hpp>
 #include <boost/thread/mutex.hpp>
 #include <boost/thread/thread.hpp>
 #include <boost/format.hpp>
diff --git a/host/lib/usrp/cores/rx_dsp_core_200.cpp b/host/lib/usrp/cores/rx_dsp_core_200.cpp
index 723c96de0..730985fdd 100644
--- a/host/lib/usrp/cores/rx_dsp_core_200.cpp
+++ b/host/lib/usrp/cores/rx_dsp_core_200.cpp
@@ -5,13 +5,13 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "rx_dsp_core_200.hpp"
-#include "dsp_core_utils.hpp"
 #include <uhd/types/dict.hpp>
 #include <uhd/exception.hpp>
 #include <uhd/utils/math.hpp>
 #include <uhd/utils/log.hpp>
 #include <uhd/utils/safe_call.hpp>
+#include <uhdlib/usrp/cores/rx_dsp_core_200.hpp>
+#include <uhdlib/usrp/cores/dsp_core_utils.hpp>
 #include <boost/assign/list_of.hpp>
 #include <boost/thread/thread.hpp> //thread sleep
 #include <boost/math/special_functions/round.hpp>
diff --git a/host/lib/usrp/cores/rx_dsp_core_3000.cpp b/host/lib/usrp/cores/rx_dsp_core_3000.cpp
index bfe3fdab3..27fc760af 100644
--- a/host/lib/usrp/cores/rx_dsp_core_3000.cpp
+++ b/host/lib/usrp/cores/rx_dsp_core_3000.cpp
@@ -5,13 +5,13 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "rx_dsp_core_3000.hpp"
-#include "dsp_core_utils.hpp"
 #include <uhd/types/dict.hpp>
 #include <uhd/exception.hpp>
 #include <uhd/utils/math.hpp>
 #include <uhd/utils/log.hpp>
 #include <uhd/utils/safe_call.hpp>
+#include <uhdlib/usrp/cores/rx_dsp_core_3000.hpp>
+#include <uhdlib/usrp/cores/dsp_core_utils.hpp>
 #include <boost/assign/list_of.hpp>
 #include <boost/thread/thread.hpp> //thread sleep
 #include <boost/math/special_functions/round.hpp>
diff --git a/host/lib/usrp/cores/rx_frontend_core_200.cpp b/host/lib/usrp/cores/rx_frontend_core_200.cpp
index 2b7fac2d8..38710db15 100644
--- a/host/lib/usrp/cores/rx_frontend_core_200.cpp
+++ b/host/lib/usrp/cores/rx_frontend_core_200.cpp
@@ -5,7 +5,7 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "rx_frontend_core_200.hpp"
+#include <uhdlib/usrp/cores/rx_frontend_core_200.hpp>
 #include <boost/math/special_functions/round.hpp>
 #include <boost/bind.hpp>
 
diff --git a/host/lib/usrp/cores/rx_frontend_core_3000.cpp b/host/lib/usrp/cores/rx_frontend_core_3000.cpp
index 92a3aacfe..cf1a105d8 100644
--- a/host/lib/usrp/cores/rx_frontend_core_3000.cpp
+++ b/host/lib/usrp/cores/rx_frontend_core_3000.cpp
@@ -5,12 +5,12 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "rx_frontend_core_3000.hpp"
-#include "dsp_core_utils.hpp"
+#include <uhd/types/dict.hpp>
+#include <uhdlib/usrp/cores/rx_frontend_core_3000.hpp>
+#include <uhdlib/usrp/cores/dsp_core_utils.hpp>
 #include <boost/math/special_functions/round.hpp>
 #include <boost/assign/list_of.hpp>
 #include <boost/bind.hpp>
-#include <uhd/types/dict.hpp>
 
 using namespace uhd;
 
diff --git a/host/lib/usrp/cores/rx_vita_core_3000.cpp b/host/lib/usrp/cores/rx_vita_core_3000.cpp
index 44fa63441..1572266a5 100644
--- a/host/lib/usrp/cores/rx_vita_core_3000.cpp
+++ b/host/lib/usrp/cores/rx_vita_core_3000.cpp
@@ -5,9 +5,9 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "rx_vita_core_3000.hpp"
 #include <uhd/utils/log.hpp>
 #include <uhd/utils/safe_call.hpp>
+#include <uhdlib/usrp/cores/rx_vita_core_3000.hpp>
 #include <boost/assign/list_of.hpp>
 #include <boost/tuple/tuple.hpp>
 #include <boost/date_time.hpp>
diff --git a/host/lib/usrp/cores/spi_core_3000.cpp b/host/lib/usrp/cores/spi_core_3000.cpp
index 5ec1079b6..f4b42f26d 100644
--- a/host/lib/usrp/cores/spi_core_3000.cpp
+++ b/host/lib/usrp/cores/spi_core_3000.cpp
@@ -5,9 +5,9 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "spi_core_3000.hpp"
 #include <uhd/exception.hpp>
 #include <uhd/utils/log.hpp>
+#include <uhdlib/usrp/cores/spi_core_3000.hpp>
 #include <boost/thread/thread.hpp> //sleep
 
 #define SPI_DIV      _base + 0
diff --git a/host/lib/usrp/cores/time64_core_200.cpp b/host/lib/usrp/cores/time64_core_200.cpp
index 27d395778..09fa92dcd 100644
--- a/host/lib/usrp/cores/time64_core_200.cpp
+++ b/host/lib/usrp/cores/time64_core_200.cpp
@@ -5,9 +5,9 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "time64_core_200.hpp"
 #include <uhd/exception.hpp>
 #include <uhd/utils/assert_has.hpp>
+#include <uhdlib/usrp/cores/time64_core_200.hpp>
 #include <boost/math/special_functions/round.hpp>
 
 #define REG_TIME64_TICKS_HI    _base + 0
diff --git a/host/lib/usrp/cores/time_core_3000.cpp b/host/lib/usrp/cores/time_core_3000.cpp
index a56b233fe..14636edec 100644
--- a/host/lib/usrp/cores/time_core_3000.cpp
+++ b/host/lib/usrp/cores/time_core_3000.cpp
@@ -5,9 +5,9 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "time_core_3000.hpp"
 #include <uhd/utils/safe_call.hpp>
 #include <uhd/utils/log.hpp>
+#include <uhdlib/usrp/cores/time_core_3000.hpp>
 #include <boost/thread/thread.hpp>
 
 #define REG_TIME_HI       _base + 0
diff --git a/host/lib/usrp/cores/tx_dsp_core_200.cpp b/host/lib/usrp/cores/tx_dsp_core_200.cpp
index 7d11cbb91..efd64f7e5 100644
--- a/host/lib/usrp/cores/tx_dsp_core_200.cpp
+++ b/host/lib/usrp/cores/tx_dsp_core_200.cpp
@@ -5,8 +5,8 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "tx_dsp_core_200.hpp"
-#include "dsp_core_utils.hpp"
+#include <uhdlib/usrp/cores/tx_dsp_core_200.hpp>
+#include <uhdlib/usrp/cores/dsp_core_utils.hpp>
 #include <uhd/types/dict.hpp>
 #include <uhd/exception.hpp>
 #include <uhd/utils/math.hpp>
diff --git a/host/lib/usrp/cores/tx_dsp_core_3000.cpp b/host/lib/usrp/cores/tx_dsp_core_3000.cpp
index 1afa73eed..b04a20497 100644
--- a/host/lib/usrp/cores/tx_dsp_core_3000.cpp
+++ b/host/lib/usrp/cores/tx_dsp_core_3000.cpp
@@ -5,8 +5,8 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "tx_dsp_core_3000.hpp"
-#include "dsp_core_utils.hpp"
+#include <uhdlib/usrp/cores/tx_dsp_core_3000.hpp>
+#include <uhdlib/usrp/cores/dsp_core_utils.hpp>
 #include <uhd/types/dict.hpp>
 #include <uhd/exception.hpp>
 #include <uhd/utils/math.hpp>
diff --git a/host/lib/usrp/cores/tx_frontend_core_200.cpp b/host/lib/usrp/cores/tx_frontend_core_200.cpp
index 92c44602c..7e23e2515 100644
--- a/host/lib/usrp/cores/tx_frontend_core_200.cpp
+++ b/host/lib/usrp/cores/tx_frontend_core_200.cpp
@@ -5,7 +5,7 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "tx_frontend_core_200.hpp"
+#include <uhdlib/usrp/cores/tx_frontend_core_200.hpp>
 #include <uhd/types/dict.hpp>
 #include <uhd/exception.hpp>
 #include <boost/assign/list_of.hpp>
diff --git a/host/lib/usrp/cores/tx_vita_core_3000.cpp b/host/lib/usrp/cores/tx_vita_core_3000.cpp
index e398f065d..689a6cf45 100644
--- a/host/lib/usrp/cores/tx_vita_core_3000.cpp
+++ b/host/lib/usrp/cores/tx_vita_core_3000.cpp
@@ -5,8 +5,8 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "tx_vita_core_3000.hpp"
 #include <uhd/utils/safe_call.hpp>
+#include <uhdlib/usrp/cores/tx_vita_core_3000.hpp>
 
 #define REG_CTRL_ERROR_POLICY       (_base + 0)
 #define REG_FC_PRE_RADIO_RESP_BASE  (_base + 2*4)
diff --git a/host/lib/usrp/cores/user_settings_core_200.cpp b/host/lib/usrp/cores/user_settings_core_200.cpp
index 9b8a0bd5f..7de18d11c 100644
--- a/host/lib/usrp/cores/user_settings_core_200.cpp
+++ b/host/lib/usrp/cores/user_settings_core_200.cpp
@@ -5,7 +5,7 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "user_settings_core_200.hpp"
+#include <uhdlib/usrp/cores/user_settings_core_200.hpp>
 
 using namespace uhd;
 
diff --git a/host/lib/usrp/cores/user_settings_core_3000.cpp b/host/lib/usrp/cores/user_settings_core_3000.cpp
index 10650d6b6..66baed57a 100644
--- a/host/lib/usrp/cores/user_settings_core_3000.cpp
+++ b/host/lib/usrp/cores/user_settings_core_3000.cpp
@@ -5,7 +5,7 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "user_settings_core_3000.hpp"
+#include <uhdlib/usrp/cores/user_settings_core_3000.hpp>
 #include <uhd/exception.hpp>
 #include <boost/thread/thread.hpp>
 
diff --git a/host/lib/usrp/dboard/db_sbx_common.hpp b/host/lib/usrp/dboard/db_sbx_common.hpp
index 1098c44f8..4d463603f 100644
--- a/host/lib/usrp/dboard/db_sbx_common.hpp
+++ b/host/lib/usrp/dboard/db_sbx_common.hpp
@@ -6,8 +6,8 @@
 //
 
 #include <uhd/types/device_addr.hpp>
-#include "adf435x.hpp"
-#include "max287x.hpp"
+#include <uhdlib/usrp/common/adf435x.hpp>
+#include <uhdlib/usrp/common/max287x.hpp>
 
 // LO Related
 #define ADF435X_CE      (1 << 3)
diff --git a/host/lib/usrp/dboard/db_twinrx.cpp b/host/lib/usrp/dboard/db_twinrx.cpp
index d1ee97e90..0d14c7632 100644
--- a/host/lib/usrp/dboard/db_twinrx.cpp
+++ b/host/lib/usrp/dboard/db_twinrx.cpp
@@ -9,7 +9,8 @@
 #include "twinrx/twinrx_ctrl.hpp"
 #include "twinrx/twinrx_io.hpp"
 #include "twinrx/twinrx_ids.hpp"
-#include <expert_factory.hpp>
+
+#include <uhdlib/experts/expert_factory.hpp>
 #include <uhd/types/device_addr.hpp>
 #include <uhd/types/ranges.hpp>
 #include <uhd/types/sensors.hpp>
diff --git a/host/lib/usrp/dboard/db_ubx.cpp b/host/lib/usrp/dboard/db_ubx.cpp
index b55a6c22a..7b153d170 100644
--- a/host/lib/usrp/dboard/db_ubx.cpp
+++ b/host/lib/usrp/dboard/db_ubx.cpp
@@ -16,9 +16,10 @@
 #include <uhd/usrp/dboard_manager.hpp>
 #include <uhd/utils/assert_has.hpp>
 #include <uhd/utils/log.hpp>
-
 #include <uhd/utils/static.hpp>
 #include <uhd/utils/safe_call.hpp>
+#include <uhdlib/usrp/common/max287x.hpp>
+
 #include <boost/assign/list_of.hpp>
 #include <boost/shared_ptr.hpp>
 #include <boost/math/special_functions/round.hpp>
@@ -26,7 +27,6 @@
 #include <boost/algorithm/string.hpp>
 #include <boost/thread/mutex.hpp>
 #include <map>
-#include "max287x.hpp"
 
 using namespace uhd;
 using namespace uhd::usrp;
diff --git a/host/lib/usrp/dboard/db_wbx_common.hpp b/host/lib/usrp/dboard/db_wbx_common.hpp
index 6c47ed5d0..ea012c91c 100644
--- a/host/lib/usrp/dboard/db_wbx_common.hpp
+++ b/host/lib/usrp/dboard/db_wbx_common.hpp
@@ -9,7 +9,7 @@
 #define INCLUDED_LIBUHD_USRP_DBOARD_DB_WBX_COMMON_HPP
 
 #include <uhd/types/device_addr.hpp>
-#include "adf435x.hpp"
+#include <uhdlib/usrp/common/adf435x.hpp>
 
 // LO Related
 #define ADF435X_CE      (1 << 3)
diff --git a/host/lib/usrp/dboard/eiscat/eiscat_radio_ctrl_impl.hpp b/host/lib/usrp/dboard/eiscat/eiscat_radio_ctrl_impl.hpp
index 33548c5f7..959e5aa74 100644
--- a/host/lib/usrp/dboard/eiscat/eiscat_radio_ctrl_impl.hpp
+++ b/host/lib/usrp/dboard/eiscat/eiscat_radio_ctrl_impl.hpp
@@ -7,9 +7,9 @@
 #ifndef INCLUDED_LIBUHD_RFNOC_EISCAT_RADIO_CTRL_IMPL_HPP
 #define INCLUDED_LIBUHD_RFNOC_EISCAT_RADIO_CTRL_IMPL_HPP
 
-#include "radio_ctrl_impl.hpp"
-#include "rpc_block_ctrl.hpp"
 #include <uhd/types/direction.hpp>
+#include <uhdlib/rfnoc/rpc_block_ctrl.hpp>
+#include <uhdlib/rfnoc/radio_ctrl_impl.hpp>
 
 namespace uhd {
     namespace rfnoc {
diff --git a/host/lib/usrp/dboard/magnesium/magnesium_ad9371_iface.hpp b/host/lib/usrp/dboard/magnesium/magnesium_ad9371_iface.hpp
index 332414ef1..5da9e68e5 100644
--- a/host/lib/usrp/dboard/magnesium/magnesium_ad9371_iface.hpp
+++ b/host/lib/usrp/dboard/magnesium/magnesium_ad9371_iface.hpp
@@ -7,8 +7,8 @@
 #ifndef INCLUDED_LIBUHD_RFNOC_MAGNESIUM_AD9371_IFACE_HPP
 #define INCLUDED_LIBUHD_RFNOC_MAGNESIUM_AD9371_IFACE_HPP
 
-#include "../../../utils/rpc.hpp"
 #include <uhd/types/direction.hpp>
+#include <uhdlib/utils/rpc.hpp>
 #include <iostream>
 #include <string>
 
diff --git a/host/lib/usrp/dboard/magnesium/magnesium_radio_ctrl_impl.hpp b/host/lib/usrp/dboard/magnesium/magnesium_radio_ctrl_impl.hpp
index a429cd058..27c5db240 100644
--- a/host/lib/usrp/dboard/magnesium/magnesium_radio_ctrl_impl.hpp
+++ b/host/lib/usrp/dboard/magnesium/magnesium_radio_ctrl_impl.hpp
@@ -7,16 +7,16 @@
 #ifndef INCLUDED_LIBUHD_RFNOC_MAGNESIUM_RADIO_CTRL_IMPL_HPP
 #define INCLUDED_LIBUHD_RFNOC_MAGNESIUM_RADIO_CTRL_IMPL_HPP
 
-#include "radio_ctrl_impl.hpp"
-#include "rpc_block_ctrl.hpp"
 #include "magnesium_cpld_ctrl.hpp"
 #include "magnesium_cpld_regs.hpp"
 #include "magnesium_ad9371_iface.hpp"
-#include "adf435x.hpp"
-#include "gpio_atr_3000.hpp"
 #include <uhd/types/serial.hpp>
 #include <uhd/usrp/dboard_manager.hpp>
 #include <uhd/usrp/gpio_defs.hpp>
+#include <uhdlib/usrp/cores/gpio_atr_3000.hpp>
+#include <uhdlib/rfnoc/rpc_block_ctrl.hpp>
+#include <uhdlib/rfnoc/radio_ctrl_impl.hpp>
+#include <uhdlib/usrp/common/adf435x.hpp>
 #include <mutex>
 
 namespace uhd {
diff --git a/host/lib/usrp/dboard/magnesium/magnesium_radio_ctrl_init.cpp b/host/lib/usrp/dboard/magnesium/magnesium_radio_ctrl_init.cpp
index 5b0eb60d1..389f9caf3 100644
--- a/host/lib/usrp/dboard/magnesium/magnesium_radio_ctrl_init.cpp
+++ b/host/lib/usrp/dboard/magnesium/magnesium_radio_ctrl_init.cpp
@@ -6,11 +6,11 @@
 
 #include "magnesium_radio_ctrl_impl.hpp"
 #include "magnesium_constants.hpp"
-#include "spi_core_3000.hpp"
 #include <uhd/utils/log.hpp>
 #include <uhd/types/eeprom.hpp>
 #include <uhd/types/sensors.hpp>
 #include <uhd/transport/chdr.hpp>
+#include <uhdlib/usrp/cores/spi_core_3000.hpp>
 #include <vector>
 #include <string>
 #include <boost/algorithm/string.hpp>
diff --git a/host/lib/usrp/dboard/twinrx/twinrx_ctrl.cpp b/host/lib/usrp/dboard/twinrx/twinrx_ctrl.cpp
index 8f394f997..3e8473087 100644
--- a/host/lib/usrp/dboard/twinrx/twinrx_ctrl.cpp
+++ b/host/lib/usrp/dboard/twinrx/twinrx_ctrl.cpp
@@ -6,8 +6,8 @@
 
 #include "twinrx_ctrl.hpp"
 #include "twinrx_ids.hpp"
-#include "adf435x.hpp"
-#include "adf535x.hpp"
+#include <uhdlib/usrp/common/adf435x.hpp>
+#include <uhdlib/usrp/common/adf535x.hpp>
 #include <uhd/utils/math.hpp>
 #include <uhd/utils/safe_call.hpp>
 #include <boost/thread/thread.hpp>
diff --git a/host/lib/usrp/dboard/twinrx/twinrx_experts.hpp b/host/lib/usrp/dboard/twinrx/twinrx_experts.hpp
index e346d3d08..c070765d9 100644
--- a/host/lib/usrp/dboard/twinrx/twinrx_experts.hpp
+++ b/host/lib/usrp/dboard/twinrx/twinrx_experts.hpp
@@ -9,7 +9,7 @@
 #define INCLUDED_DBOARD_TWINRX_EXPERTS_HPP
 
 #include "twinrx_ctrl.hpp"
-#include "expert_nodes.hpp"
+#include <uhdlib/experts/expert_nodes.hpp>
 #include <uhd/utils/math.hpp>
 
 namespace uhd { namespace usrp { namespace dboard { namespace twinrx {
diff --git a/host/lib/usrp/dboard/twinrx/twinrx_io.hpp b/host/lib/usrp/dboard/twinrx/twinrx_io.hpp
index 3ff497ab4..c9665f1dd 100644
--- a/host/lib/usrp/dboard/twinrx/twinrx_io.hpp
+++ b/host/lib/usrp/dboard/twinrx/twinrx_io.hpp
@@ -11,8 +11,8 @@
 #include <uhd/types/wb_iface.hpp>
 #include <uhd/usrp/dboard_base.hpp>
 #include <uhd/utils/soft_register.hpp>
+#include <uhdlib/usrp/cores/gpio_atr_3000.hpp>
 #include <boost/thread.hpp>
-#include "gpio_atr_3000.hpp"
 
 namespace uhd { namespace usrp { namespace dboard { namespace twinrx {
 
diff --git a/host/lib/usrp/device3/device3_impl.cpp b/host/lib/usrp/device3/device3_impl.cpp
index 7792a4b73..d4ea8a19f 100644
--- a/host/lib/usrp/device3/device3_impl.cpp
+++ b/host/lib/usrp/device3/device3_impl.cpp
@@ -6,10 +6,10 @@
 //
 
 #include "device3_impl.hpp"
-#include "graph_impl.hpp"
-#include "ctrl_iface.hpp"
 #include <uhd/utils/log.hpp>
 #include <uhd/rfnoc/block_ctrl_base.hpp>
+#include <uhdlib/rfnoc/graph_impl.hpp>
+#include <uhdlib/rfnoc/ctrl_iface.hpp>
 #include <boost/make_shared.hpp>
 #include <algorithm>
 
diff --git a/host/lib/usrp/device3/device3_impl.hpp b/host/lib/usrp/device3/device3_impl.hpp
index 1dbb78155..8ecb1f72b 100644
--- a/host/lib/usrp/device3/device3_impl.hpp
+++ b/host/lib/usrp/device3/device3_impl.hpp
@@ -21,7 +21,7 @@
 #include <uhd/types/direction.hpp>
 #include <uhd/utils/tasks.hpp>
 #include <uhd/device3.hpp>
-#include "xports.hpp"
+#include <uhdlib/rfnoc/xports.hpp>
 
 namespace uhd { namespace usrp {
 
diff --git a/host/lib/usrp/device3/device3_io_impl.cpp b/host/lib/usrp/device3/device3_io_impl.cpp
index 26b3a29e9..fed273ae2 100644
--- a/host/lib/usrp/device3/device3_io_impl.cpp
+++ b/host/lib/usrp/device3/device3_io_impl.cpp
@@ -13,15 +13,14 @@
 #include <uhd/rfnoc/sink_block_ctrl_base.hpp>
 #include <uhd/utils/byteswap.hpp>
 #include <uhd/utils/log.hpp>
-
-#include "../common/async_packet_handler.hpp"
 #include "../../transport/super_recv_packet_handler.hpp"
 #include "../../transport/super_send_packet_handler.hpp"
-#include "../../rfnoc/rx_stream_terminator.hpp"
-#include "../../rfnoc/tx_stream_terminator.hpp"
 #include <uhd/rfnoc/rate_node_ctrl.hpp>
 #include <uhd/rfnoc/radio_ctrl.hpp>
 #include <uhd/transport/zero_copy_flow_ctrl.hpp>
+#include <uhdlib/rfnoc/rx_stream_terminator.hpp>
+#include <uhdlib/rfnoc/tx_stream_terminator.hpp>
+#include <uhdlib/usrp/common/async_packet_handler.hpp>
 #include <boost/atomic.hpp>
 
 #define UHD_TX_STREAMER_LOG() UHD_LOGGER_TRACE("STREAMER")
diff --git a/host/lib/usrp/e300/e300_impl.hpp b/host/lib/usrp/e300/e300_impl.hpp
index 121ef00e2..489bdd014 100644
--- a/host/lib/usrp/e300/e300_impl.hpp
+++ b/host/lib/usrp/e300/e300_impl.hpp
@@ -17,21 +17,21 @@
 #include <uhd/transport/bounded_buffer.hpp>
 #include <uhd/types/serial.hpp>
 #include <uhd/types/sensors.hpp>
+#include <uhdlib/usrp/common/ad9361_ctrl.hpp>
 #include <boost/weak_ptr.hpp>
 #include <boost/thread/mutex.hpp>
 #include <string>
 #include "e300_fifo_config.hpp"
-#include "radio_ctrl_core_3000.hpp"
-#include "rx_frontend_core_200.hpp"
-#include "tx_frontend_core_200.hpp"
-#include "rx_vita_core_3000.hpp"
-#include "tx_vita_core_3000.hpp"
-#include "time_core_3000.hpp"
-#include "rx_dsp_core_3000.hpp"
-#include "tx_dsp_core_3000.hpp"
-#include "ad9361_ctrl.hpp"
-#include "ad936x_manager.hpp"
-#include "gpio_atr_3000.hpp"
+#include <uhdlib/usrp/cores/radio_ctrl_core_3000.hpp>
+#include <uhdlib/usrp/cores/rx_frontend_core_200.hpp>
+#include <uhdlib/usrp/cores/tx_frontend_core_200.hpp>
+#include <uhdlib/usrp/cores/rx_vita_core_3000.hpp>
+#include <uhdlib/usrp/cores/tx_vita_core_3000.hpp>
+#include <uhdlib/usrp/cores/time_core_3000.hpp>
+#include <uhdlib/usrp/cores/rx_dsp_core_3000.hpp>
+#include <uhdlib/usrp/cores/tx_dsp_core_3000.hpp>
+#include <uhdlib/usrp/common/ad936x_manager.hpp>
+#include <uhdlib/usrp/cores/gpio_atr_3000.hpp>
 
 #include "e300_global_regs.hpp"
 #include "e300_i2c.hpp"
diff --git a/host/lib/usrp/e300/e300_io_impl.cpp b/host/lib/usrp/e300/e300_io_impl.cpp
index f91f627dd..4d4b54b73 100644
--- a/host/lib/usrp/e300/e300_io_impl.cpp
+++ b/host/lib/usrp/e300/e300_io_impl.cpp
@@ -8,10 +8,10 @@
 #include "e300_regs.hpp"
 #include "e300_impl.hpp"
 #include "e300_fpga_defs.hpp"
-#include "validate_subdev_spec.hpp"
+#include <uhdlib/usrp/common/validate_subdev_spec.hpp>
 #include "../../transport/super_recv_packet_handler.hpp"
 #include "../../transport/super_send_packet_handler.hpp"
-#include "async_packet_handler.hpp"
+#include <uhdlib/usrp/common/async_packet_handler.hpp>
 #include <uhd/transport/bounded_buffer.hpp>
 #include <boost/bind.hpp>
 #include <uhd/utils/tasks.hpp>
diff --git a/host/lib/usrp/e300/e300_network.cpp b/host/lib/usrp/e300/e300_network.cpp
index 404ac0c19..d7473d2ee 100644
--- a/host/lib/usrp/e300/e300_network.cpp
+++ b/host/lib/usrp/e300/e300_network.cpp
@@ -11,8 +11,6 @@
 
 #include "e300_impl.hpp"
 
-#include "ad9361_ctrl.hpp"
-
 #include "e300_sensor_manager.hpp"
 #include "e300_fifo_config.hpp"
 #include "e300_spi.hpp"
@@ -25,6 +23,8 @@
 #include <uhd/utils/byteswap.hpp>
 #include <uhd/utils/paths.hpp>
 
+#include <uhdlib/usrp/common/ad9361_ctrl.hpp>
+
 #include <boost/asio.hpp>
 #include <boost/thread.hpp>
 #include <boost/filesystem.hpp>
diff --git a/host/lib/usrp/e300/e300_remote_codec_ctrl.hpp b/host/lib/usrp/e300/e300_remote_codec_ctrl.hpp
index ea8db305e..9c9e16672 100644
--- a/host/lib/usrp/e300/e300_remote_codec_ctrl.hpp
+++ b/host/lib/usrp/e300/e300_remote_codec_ctrl.hpp
@@ -8,8 +8,8 @@
 #ifndef INCLUDED_E300_REMOTE_CODEC_CTRL_HPP
 #define INCLUDED_E300_REMOTE_CODEC_CTRL_HPP
 
-#include "ad9361_ctrl.hpp"
 #include <uhd/transport/zero_copy.hpp>
+#include <uhdlib/usrp/common/ad9361_ctrl.hpp>
 
 namespace uhd { namespace usrp { namespace e300 {
 
diff --git a/host/lib/usrp/mpmd/mpmd_impl.cpp b/host/lib/usrp/mpmd/mpmd_impl.cpp
index 4d3fba8a1..d63a2cfa0 100644
--- a/host/lib/usrp/mpmd/mpmd_impl.cpp
+++ b/host/lib/usrp/mpmd/mpmd_impl.cpp
@@ -5,11 +5,18 @@
 //
 
 #include "mpmd_impl.hpp"
-#include "rpc_block_ctrl.hpp"
 #include <../device3/device3_impl.hpp>
 #include <uhd/exception.hpp>
 #include <uhd/utils/static.hpp>
 #include <uhd/utils/tasks.hpp>
+#include <uhd/types/sensors.hpp>
+#include <uhd/types/eeprom.hpp>
+#include <uhd/types/component_file.hpp>
+#include <uhd/usrp/mboard_eeprom.hpp>
+#include <uhdlib/rfnoc/rpc_block_ctrl.hpp>
+#include <uhdlib/rfnoc/radio_ctrl_impl.hpp>
+#include <boost/algorithm/string.hpp>
+#include <boost/asio.hpp>
 #include <boost/make_shared.hpp>
 #include <boost/thread.hpp>
 #include <memory>
diff --git a/host/lib/usrp/mpmd/mpmd_impl.hpp b/host/lib/usrp/mpmd/mpmd_impl.hpp
index e3c44a5a0..0a5ed4545 100644
--- a/host/lib/usrp/mpmd/mpmd_impl.hpp
+++ b/host/lib/usrp/mpmd/mpmd_impl.hpp
@@ -8,7 +8,6 @@
 #define INCLUDED_MPMD_IMPL_HPP
 
 #include "mpmd_xport_mgr.hpp"
-#include "../../utils/rpc.hpp"
 #include "../device3/device3_impl.hpp"
 #include <uhd/stream.hpp>
 #include <uhd/types/device_addr.hpp>
@@ -16,6 +15,7 @@
 #include <uhd/utils/tasks.hpp>
 #include <uhd/transport/muxed_zero_copy_if.hpp>
 #include <uhd/property_tree.hpp>
+#include <uhdlib/utils/rpc.hpp>
 #include <boost/optional.hpp>
 #include <map>
 #include <memory>
diff --git a/host/lib/usrp/multi_usrp.cpp b/host/lib/usrp/multi_usrp.cpp
index f06f1632c..c08c6c0af 100644
--- a/host/lib/usrp/multi_usrp.cpp
+++ b/host/lib/usrp/multi_usrp.cpp
@@ -18,7 +18,7 @@
 #include <uhd/convert.hpp>
 #include <uhd/utils/soft_register.hpp>
 #include <uhdlib/usrp/gpio_defs.hpp>
-#include "legacy_compat.hpp"
+#include <uhdlib/rfnoc/legacy_compat.hpp>
 #include <boost/assign/list_of.hpp>
 #include <boost/thread.hpp>
 #include <boost/format.hpp>
diff --git a/host/lib/usrp/n230/n230_clk_pps_ctrl.hpp b/host/lib/usrp/n230/n230_clk_pps_ctrl.hpp
index 53ff0571f..af9ffc307 100644
--- a/host/lib/usrp/n230/n230_clk_pps_ctrl.hpp
+++ b/host/lib/usrp/n230/n230_clk_pps_ctrl.hpp
@@ -8,14 +8,14 @@
 #ifndef INCLUDED_N230_CLK_PPS_CTRL_HPP
 #define INCLUDED_N230_CLK_PPS_CTRL_HPP
 
-#include "time_core_3000.hpp"
-#include "ad9361_ctrl.hpp"
+#include "n230_cores.hpp"
+#include "n230_fpga_defs.h"
 #include <uhd/types/sensors.hpp>
+#include <uhdlib/usrp/cores/time_core_3000.hpp>
+#include <uhdlib/usrp/common/ad9361_ctrl.hpp>
 #include <boost/shared_ptr.hpp>
 #include <boost/utility.hpp>
 #include <vector>
-#include "n230_cores.hpp"
-#include "n230_fpga_defs.h"
 
 namespace uhd { namespace usrp { namespace n230 {
 
diff --git a/host/lib/usrp/n230/n230_cores.hpp b/host/lib/usrp/n230/n230_cores.hpp
index ac454cc39..2768ada41 100644
--- a/host/lib/usrp/n230/n230_cores.hpp
+++ b/host/lib/usrp/n230/n230_cores.hpp
@@ -8,8 +8,8 @@
 #ifndef INCLUDED_N230_CORES_HPP
 #define INCLUDED_N230_CORES_HPP
 
-#include "spi_core_3000.hpp"
-#include "adf4001_ctrl.hpp"
+#include <uhdlib/usrp/cores/spi_core_3000.hpp>
+#include <uhdlib/usrp/common/adf4001_ctrl.hpp>
 #include <boost/thread/mutex.hpp>
 
 namespace uhd { namespace usrp { namespace n230 {
diff --git a/host/lib/usrp/n230/n230_frontend_ctrl.hpp b/host/lib/usrp/n230/n230_frontend_ctrl.hpp
index 6faa35ac8..842814213 100644
--- a/host/lib/usrp/n230/n230_frontend_ctrl.hpp
+++ b/host/lib/usrp/n230/n230_frontend_ctrl.hpp
@@ -8,14 +8,14 @@
 #ifndef INCLUDED_N230_FRONTEND_CTRL_HPP
 #define INCLUDED_N230_FRONTEND_CTRL_HPP
 
-#include "radio_ctrl_core_3000.hpp"
-#include "ad9361_ctrl.hpp"
-#include "gpio_atr_3000.hpp"
+#include "n230_fpga_defs.h"
+#include <uhdlib/usrp/cores/radio_ctrl_core_3000.hpp>
+#include <uhdlib/usrp/cores/gpio_atr_3000.hpp>
+#include <uhdlib/usrp/common/ad9361_ctrl.hpp>
 #include <uhd/types/sensors.hpp>
 #include <boost/shared_ptr.hpp>
 #include <boost/utility.hpp>
 #include <vector>
-#include "n230_fpga_defs.h"
 
 namespace uhd { namespace usrp { namespace n230 {
 
diff --git a/host/lib/usrp/n230/n230_impl.cpp b/host/lib/usrp/n230/n230_impl.cpp
index 04d404311..c4e3af0b2 100644
--- a/host/lib/usrp/n230/n230_impl.cpp
+++ b/host/lib/usrp/n230/n230_impl.cpp
@@ -6,9 +6,14 @@
 //
 
 #include "n230_impl.hpp"
-
 #include "n230_fw_ctrl_iface.hpp"
-#include "validate_subdev_spec.hpp"
+#include "n230_defaults.h"
+#include "n230_fpga_defs.h"
+#include "n230_fw_defs.h"
+#include "n230_fw_host_iface.h"
+
+#include <uhdlib/usrp/common/validate_subdev_spec.hpp>
+
 #include <uhd/utils/static.hpp>
 #include <uhd/transport/if_addrs.hpp>
 #include <uhd/transport/udp_zero_copy.hpp>
@@ -22,6 +27,7 @@
 #include <uhd/usrp/mboard_eeprom.hpp>
 #include <uhd/usrp/dboard_eeprom.hpp>
 #include <uhd/usrp/gps_ctrl.hpp>
+
 #include <boost/format.hpp>
 #include <boost/lexical_cast.hpp>
 #include <boost/bind.hpp>
@@ -31,11 +37,6 @@
 #include <boost/asio.hpp> //used for htonl and ntohl
 #include <boost/make_shared.hpp>
 
-#include "n230_defaults.h"
-#include "n230_fpga_defs.h"
-#include "n230_fw_defs.h"
-#include "n230_fw_host_iface.h"
-
 namespace uhd { namespace usrp { namespace n230 {
 
 using namespace uhd::transport;
diff --git a/host/lib/usrp/n230/n230_impl.hpp b/host/lib/usrp/n230/n230_impl.hpp
index d0547922a..213f0f61e 100644
--- a/host/lib/usrp/n230/n230_impl.hpp
+++ b/host/lib/usrp/n230/n230_impl.hpp
@@ -16,7 +16,7 @@
 #include "n230_eeprom_manager.hpp"
 #include "n230_resource_manager.hpp"
 #include "n230_stream_manager.hpp"
-#include "recv_packet_demuxer_3000.hpp"
+#include <uhdlib/usrp/common/recv_packet_demuxer_3000.hpp>
 
 namespace uhd { namespace usrp { namespace n230 {
 
diff --git a/host/lib/usrp/n230/n230_resource_manager.hpp b/host/lib/usrp/n230/n230_resource_manager.hpp
index b2a9b6a9d..4b4065e8f 100644
--- a/host/lib/usrp/n230/n230_resource_manager.hpp
+++ b/host/lib/usrp/n230/n230_resource_manager.hpp
@@ -8,17 +8,25 @@
 #ifndef INCLUDED_N230_RESOURCE_MANAGER_HPP
 #define INCLUDED_N230_RESOURCE_MANAGER_HPP
 
-#include "radio_ctrl_core_3000.hpp"
-#include "spi_core_3000.hpp"
-#include "gpio_atr_3000.hpp"
-#include "rx_vita_core_3000.hpp"
-#include "tx_vita_core_3000.hpp"
-#include "time_core_3000.hpp"
-#include "rx_dsp_core_3000.hpp"
-#include "tx_dsp_core_3000.hpp"
-#include "user_settings_core_3000.hpp"
-#include "ad9361_ctrl.hpp"
-#include "ad936x_manager.hpp"
+#include "n230_fw_ctrl_iface.hpp"
+#include "n230_clk_pps_ctrl.hpp"
+#include "n230_cores.hpp"
+#include "n230_fpga_defs.h"
+#include "n230_frontend_ctrl.hpp"
+#include "n230_uart.hpp"
+
+#include <uhdlib/usrp/cores/radio_ctrl_core_3000.hpp>
+#include <uhdlib/usrp/cores/spi_core_3000.hpp>
+#include <uhdlib/usrp/cores/gpio_atr_3000.hpp>
+#include <uhdlib/usrp/cores/rx_vita_core_3000.hpp>
+#include <uhdlib/usrp/cores/tx_vita_core_3000.hpp>
+#include <uhdlib/usrp/cores/time_core_3000.hpp>
+#include <uhdlib/usrp/cores/rx_dsp_core_3000.hpp>
+#include <uhdlib/usrp/cores/tx_dsp_core_3000.hpp>
+#include <uhdlib/usrp/cores/user_settings_core_3000.hpp>
+#include <uhdlib/usrp/common/ad9361_ctrl.hpp>
+#include <uhdlib/usrp/common/ad936x_manager.hpp>
+
 #include <uhd/utils/tasks.hpp>
 #include <uhd/types/sid.hpp>
 #include <uhd/types/device_addr.hpp>
@@ -27,13 +35,6 @@
 #include <uhd/transport/bounded_buffer.hpp>
 #include <uhd/usrp/gps_ctrl.hpp>
 
-#include "n230_fw_ctrl_iface.hpp"
-#include "n230_clk_pps_ctrl.hpp"
-#include "n230_cores.hpp"
-#include "n230_fpga_defs.h"
-#include "n230_frontend_ctrl.hpp"
-#include "n230_uart.hpp"
-
 namespace uhd { namespace usrp { namespace n230 {
 
 enum n230_eth_port_t {
diff --git a/host/lib/usrp/n230/n230_stream_manager.cpp b/host/lib/usrp/n230/n230_stream_manager.cpp
index 3071adf3a..5c44992ca 100644
--- a/host/lib/usrp/n230/n230_stream_manager.cpp
+++ b/host/lib/usrp/n230/n230_stream_manager.cpp
@@ -9,11 +9,11 @@
 
 #include "../../transport/super_recv_packet_handler.hpp"
 #include "../../transport/super_send_packet_handler.hpp"
-#include "async_packet_handler.hpp"
+#include <uhdlib/usrp/common/async_packet_handler.hpp>
 #include <uhd/transport/bounded_buffer.hpp>
-#include <boost/bind.hpp>
 #include <uhd/utils/tasks.hpp>
 #include <uhd/utils/log.hpp>
+#include <boost/bind.hpp>
 #include <boost/make_shared.hpp>
 
 static const double N230_RX_SW_BUFF_FULL_FACTOR   = 0.90;     //Buffer should ideally be 90% full.
diff --git a/host/lib/usrp/n230/n230_stream_manager.hpp b/host/lib/usrp/n230/n230_stream_manager.hpp
index a6acb602d..6ec219f0b 100644
--- a/host/lib/usrp/n230/n230_stream_manager.hpp
+++ b/host/lib/usrp/n230/n230_stream_manager.hpp
@@ -8,8 +8,11 @@
 #ifndef INCLUDED_N230_STREAM_MANAGER_HPP
 #define INCLUDED_N230_STREAM_MANAGER_HPP
 
-#include "time_core_3000.hpp"
-#include "rx_vita_core_3000.hpp"
+#include "n230_device_args.hpp"
+#include "n230_resource_manager.hpp"
+
+#include <uhdlib/usrp/cores/time_core_3000.hpp>
+#include <uhdlib/usrp/cores/rx_vita_core_3000.hpp>
 #include <uhd/types/sid.hpp>
 #include <uhd/types/device_addr.hpp>
 #include <uhd/types/metadata.hpp>
@@ -19,8 +22,6 @@
 #include <uhd/property_tree.hpp>
 #include <uhd/utils/tasks.hpp>
 #include <boost/smart_ptr.hpp>
-#include "n230_device_args.hpp"
-#include "n230_resource_manager.hpp"
 
 namespace uhd { namespace usrp { namespace n230 {
 
diff --git a/host/lib/usrp/usrp1/io_impl.cpp b/host/lib/usrp/usrp1/io_impl.cpp
index a4ffac3db..0e79a5985 100644
--- a/host/lib/usrp/usrp1/io_impl.cpp
+++ b/host/lib/usrp/usrp1/io_impl.cpp
@@ -5,13 +5,13 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "validate_subdev_spec.hpp"
+#include "usrp1_calc_mux.hpp"
+#include "usrp1_impl.hpp"
+#include <uhdlib/usrp/common/validate_subdev_spec.hpp>
 #define SRPH_DONT_CHECK_SEQUENCE
 #include "../../transport/super_recv_packet_handler.hpp"
 #define SSPH_DONT_PAD_TO_ONE
 #include "../../transport/super_send_packet_handler.hpp"
-#include "usrp1_calc_mux.hpp"
-#include "usrp1_impl.hpp"
 #include <uhd/utils/log.hpp>
 #include <uhd/utils/tasks.hpp>
 #include <uhd/utils/safe_call.hpp>
diff --git a/host/lib/usrp/usrp1/mb_eeprom.cpp b/host/lib/usrp/usrp1/mb_eeprom.cpp
index cedbb8944..9b868fd4e 100644
--- a/host/lib/usrp/usrp1/mb_eeprom.cpp
+++ b/host/lib/usrp/usrp1/mb_eeprom.cpp
@@ -5,7 +5,7 @@
 //
 
 #include "usrp1_impl.hpp"
-#include "eeprom_utils.hpp"
+#include <uhdlib/utils/eeprom_utils.hpp>
 #include <uhd/usrp/mboard_eeprom.hpp>
 #include <uhd/types/byte_vector.hpp>
 
diff --git a/host/lib/usrp/usrp1/usrp1_calc_mux.hpp b/host/lib/usrp/usrp1/usrp1_calc_mux.hpp
index 76e0bf971..1169f2fe8 100644
--- a/host/lib/usrp/usrp1/usrp1_calc_mux.hpp
+++ b/host/lib/usrp/usrp1/usrp1_calc_mux.hpp
@@ -9,6 +9,7 @@
 #include <uhd/exception.hpp>
 #include <uhd/types/dict.hpp>
 #include <uhd/utils/algorithm.hpp>
+#include <uhd/utils/log.hpp>
 #include <boost/assign/list_of.hpp>
 #include <boost/format.hpp>
 #include <utility>
diff --git a/host/lib/usrp/usrp1/usrp1_iface.hpp b/host/lib/usrp/usrp1/usrp1_iface.hpp
index ec6bc52d4..4ae4e83e0 100644
--- a/host/lib/usrp/usrp1/usrp1_iface.hpp
+++ b/host/lib/usrp/usrp1/usrp1_iface.hpp
@@ -8,7 +8,7 @@
 #ifndef INCLUDED_USRP1_IFACE_HPP
 #define INCLUDED_USRP1_IFACE_HPP
 
-#include "fx2_ctrl.hpp"
+#include <uhdlib/usrp/common/fx2_ctrl.hpp>
 #include <uhd/types/wb_iface.hpp>
 #include <uhd/types/serial.hpp>
 #include <boost/shared_ptr.hpp>
diff --git a/host/lib/usrp/usrp2/dboard_iface.cpp b/host/lib/usrp/usrp2/dboard_iface.cpp
index 5187d000e..a245705df 100644
--- a/host/lib/usrp/usrp2/dboard_iface.cpp
+++ b/host/lib/usrp/usrp2/dboard_iface.cpp
@@ -5,11 +5,13 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "gpio_core_200.hpp"
-#include <uhd/types/serial.hpp>
 #include "clock_ctrl.hpp"
 #include "usrp2_regs.hpp" //wishbone address constants
 #include "usrp2_fifo_ctrl.hpp"
+#include "ad7922_regs.hpp" //aux adc
+#include "ad5623_regs.hpp" //aux dac
+#include <uhdlib/usrp/cores/gpio_core_200.hpp>
+#include <uhd/types/serial.hpp>
 #include <uhd/usrp/dboard_iface.hpp>
 #include <uhd/types/dict.hpp>
 #include <uhd/exception.hpp>
@@ -17,8 +19,6 @@
 #include <boost/assign/list_of.hpp>
 #include <boost/asio.hpp> //htonl and ntohl
 #include <boost/math/special_functions/round.hpp>
-#include "ad7922_regs.hpp" //aux adc
-#include "ad5623_regs.hpp" //aux dac
 
 using namespace uhd;
 using namespace uhd::usrp;
diff --git a/host/lib/usrp/usrp2/io_impl.cpp b/host/lib/usrp/usrp2/io_impl.cpp
index 2d6d7c11d..2b8c7a5d1 100644
--- a/host/lib/usrp/usrp2/io_impl.cpp
+++ b/host/lib/usrp/usrp2/io_impl.cpp
@@ -5,8 +5,8 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "validate_subdev_spec.hpp"
-#include "async_packet_handler.hpp"
+#include <uhdlib/usrp/common/validate_subdev_spec.hpp>
+#include <uhdlib/usrp/common/async_packet_handler.hpp>
 #include "../../transport/super_recv_packet_handler.hpp"
 #include "../../transport/super_send_packet_handler.hpp"
 #include "usrp2_impl.hpp"
diff --git a/host/lib/usrp/usrp2/mb_eeprom.cpp b/host/lib/usrp/usrp2/mb_eeprom.cpp
index b1c8ab8b0..bd91b527c 100644
--- a/host/lib/usrp/usrp2/mb_eeprom.cpp
+++ b/host/lib/usrp/usrp2/mb_eeprom.cpp
@@ -5,7 +5,7 @@
 //
 
 #include "usrp2_impl.hpp"
-#include "eeprom_utils.hpp"
+#include <uhdlib/utils/eeprom_utils.hpp>
 #include <uhd/usrp/mboard_eeprom.hpp>
 #include <uhd/types/byte_vector.hpp>
 #include <uhd/types/mac_addr.hpp>
diff --git a/host/lib/usrp/usrp2/usrp2_impl.cpp b/host/lib/usrp/usrp2/usrp2_impl.cpp
index 4afdfae56..88591333a 100644
--- a/host/lib/usrp/usrp2/usrp2_impl.cpp
+++ b/host/lib/usrp/usrp2/usrp2_impl.cpp
@@ -6,7 +6,7 @@
 
 #include "usrp2_impl.hpp"
 #include "fw_common.h"
-#include "apply_corrections.hpp"
+#include <uhdlib/usrp/common/apply_corrections.hpp>
 #include <uhd/utils/log.hpp>
 
 #include <uhd/exception.hpp>
diff --git a/host/lib/usrp/usrp2/usrp2_impl.hpp b/host/lib/usrp/usrp2/usrp2_impl.hpp
index 81d72ccdd..0e164e537 100644
--- a/host/lib/usrp/usrp2/usrp2_impl.hpp
+++ b/host/lib/usrp/usrp2/usrp2_impl.hpp
@@ -8,17 +8,17 @@
 #ifndef INCLUDED_USRP2_IMPL_HPP
 #define INCLUDED_USRP2_IMPL_HPP
 
-#include "gpio_core_200.hpp"
 #include "usrp2_iface.hpp"
 #include "usrp2_fifo_ctrl.hpp"
 #include "clock_ctrl.hpp"
 #include "codec_ctrl.hpp"
-#include "rx_frontend_core_200.hpp"
-#include "tx_frontend_core_200.hpp"
-#include "rx_dsp_core_200.hpp"
-#include "tx_dsp_core_200.hpp"
-#include "time64_core_200.hpp"
-#include "user_settings_core_200.hpp"
+#include <uhdlib/usrp/cores/rx_frontend_core_200.hpp>
+#include <uhdlib/usrp/cores/tx_frontend_core_200.hpp>
+#include <uhdlib/usrp/cores/rx_dsp_core_200.hpp>
+#include <uhdlib/usrp/cores/tx_dsp_core_200.hpp>
+#include <uhdlib/usrp/cores/time64_core_200.hpp>
+#include <uhdlib/usrp/cores/user_settings_core_200.hpp>
+#include <uhdlib/usrp/cores/gpio_core_200.hpp>
 #include <uhd/property_tree.hpp>
 #include <uhd/usrp/gps_ctrl.hpp>
 #include <uhd/device.hpp>
@@ -27,8 +27,6 @@
 #include <uhd/types/stream_cmd.hpp>
 #include <uhd/types/clock_config.hpp>
 #include <uhd/usrp/dboard_eeprom.hpp>
-#include <boost/shared_ptr.hpp>
-#include <boost/function.hpp>
 #include <uhd/transport/vrt_if_packet.hpp>
 #include <uhd/transport/udp_simple.hpp>
 #include <uhd/transport/udp_zero_copy.hpp>
@@ -36,6 +34,8 @@
 #include <uhd/usrp/dboard_manager.hpp>
 #include <uhd/usrp/subdev_spec.hpp>
 #include <boost/weak_ptr.hpp>
+#include <boost/shared_ptr.hpp>
+#include <boost/function.hpp>
 #include <atomic>
 
 static const double USRP2_LINK_RATE_BPS = 1000e6/8;
diff --git a/host/lib/usrp/x300/x300_dboard_iface.hpp b/host/lib/usrp/x300/x300_dboard_iface.hpp
index 1c78f8705..807879bad 100644
--- a/host/lib/usrp/x300/x300_dboard_iface.hpp
+++ b/host/lib/usrp/x300/x300_dboard_iface.hpp
@@ -9,13 +9,13 @@
 #define INCLUDED_X300_DBOARD_IFACE_HPP
 
 #include "x300_clock_ctrl.hpp"
-#include "spi_core_3000.hpp"
-#include "i2c_core_100_wb32.hpp"
-#include "gpio_atr_3000.hpp"
-#include "rx_frontend_core_3000.hpp"
-#include <uhd/usrp/dboard_iface.hpp>
+#include <uhdlib/usrp/cores/spi_core_3000.hpp>
+#include <uhdlib/usrp/cores/i2c_core_100_wb32.hpp>
+#include <uhdlib/usrp/cores/gpio_atr_3000.hpp>
+#include <uhdlib/usrp/cores/rx_frontend_core_3000.hpp>
 #include "ad7922_regs.hpp" //aux adc
 #include "ad5623_regs.hpp" //aux dac
+#include <uhd/usrp/dboard_iface.hpp>
 #include <uhd/types/dict.hpp>
 
 struct x300_dboard_iface_config_t
diff --git a/host/lib/usrp/x300/x300_impl.cpp b/host/lib/usrp/x300/x300_impl.cpp
index 97c8c0682..9ea3a814d 100644
--- a/host/lib/usrp/x300/x300_impl.cpp
+++ b/host/lib/usrp/x300/x300_impl.cpp
@@ -9,19 +9,13 @@
 #include "x300_lvbitx.hpp"
 #include "x310_lvbitx.hpp"
 #include "x300_mb_eeprom_iface.hpp"
-#include "apply_corrections.hpp"
-#include <boost/algorithm/string.hpp>
-#include <boost/asio.hpp>
+#include <uhdlib/usrp/common/apply_corrections.hpp>
 #include <uhd/utils/static.hpp>
 #include <uhd/utils/log.hpp>
 #include <uhd/utils/paths.hpp>
 #include <uhd/utils/safe_call.hpp>
 #include <uhd/usrp/subdev_spec.hpp>
 #include <uhd/transport/if_addrs.hpp>
-#include <boost/bind.hpp>
-#include <boost/make_shared.hpp>
-#include <boost/functional/hash.hpp>
-#include <boost/assign/list_of.hpp>
 #include <uhd/transport/udp_zero_copy.hpp>
 #include <uhd/transport/udp_constants.hpp>
 #include <uhd/transport/zero_copy_recv_offload.hpp>
@@ -29,6 +23,13 @@
 #include <uhd/transport/nirio/niusrprio_session.h>
 #include <uhd/utils/platform.hpp>
 #include <uhd/types/sid.hpp>
+
+#include <boost/algorithm/string.hpp>
+#include <boost/asio.hpp>
+#include <boost/bind.hpp>
+#include <boost/make_shared.hpp>
+#include <boost/functional/hash.hpp>
+#include <boost/assign/list_of.hpp>
 #include <fstream>
 
 #define NIUSRPRIO_DEFAULT_RPC_PORT "5444"
diff --git a/host/lib/usrp/x300/x300_impl.hpp b/host/lib/usrp/x300/x300_impl.hpp
index 9e89ca542..df6af5521 100644
--- a/host/lib/usrp/x300/x300_impl.hpp
+++ b/host/lib/usrp/x300/x300_impl.hpp
@@ -8,27 +8,29 @@
 #ifndef INCLUDED_X300_IMPL_HPP
 #define INCLUDED_X300_IMPL_HPP
 
-#include <uhd/property_tree.hpp>
+#include "x300_radio_ctrl_impl.hpp"
+#include "x300_clock_ctrl.hpp"
+#include "x300_fw_common.h"
+#include "x300_regs.hpp"
+
 #include "../device3/device3_impl.hpp"
+#include <uhd/property_tree.hpp>
 #include <uhd/usrp/mboard_eeprom.hpp>
 #include <uhd/usrp/subdev_spec.hpp>
 #include <uhd/types/sensors.hpp>
-#include "x300_radio_ctrl_impl.hpp"
-#include "x300_clock_ctrl.hpp"
-#include "x300_fw_common.h"
 #include <uhd/transport/udp_simple.hpp> //mtu
-#include "i2c_core_100_wb32.hpp"
-#include <boost/weak_ptr.hpp>
 #include <uhd/usrp/gps_ctrl.hpp>
 #include <uhd/transport/nirio/niusrprio_session.h>
 #include <uhd/transport/vrt_if_packet.hpp>
 #include <uhd/transport/muxed_zero_copy_if.hpp>
-#include "recv_packet_demuxer_3000.hpp"
-#include "x300_regs.hpp"
 ///////////// RFNOC /////////////////////
 #include <uhd/rfnoc/block_ctrl.hpp>
 ///////////// RFNOC /////////////////////
+
+#include <uhdlib/usrp/cores/i2c_core_100_wb32.hpp>
+#include <uhdlib/usrp/common/recv_packet_demuxer_3000.hpp>
 #include <boost/dynamic_bitset.hpp>
+#include <boost/weak_ptr.hpp>
 #include <atomic>
 
 static const std::string X300_FW_FILE_NAME  = "usrp_x300_fw.bin";
diff --git a/host/lib/usrp/x300/x300_io_impl.cpp b/host/lib/usrp/x300/x300_io_impl.cpp
index b6e93c421..082d83185 100644
--- a/host/lib/usrp/x300/x300_io_impl.cpp
+++ b/host/lib/usrp/x300/x300_io_impl.cpp
@@ -9,12 +9,12 @@
 #include "x300_impl.hpp"
 #include "../../transport/super_recv_packet_handler.hpp"
 #include "../../transport/super_send_packet_handler.hpp"
+#include <uhdlib/usrp/common/async_packet_handler.hpp>
 #include <uhd/transport/nirio_zero_copy.hpp>
-#include "async_packet_handler.hpp"
 #include <uhd/transport/bounded_buffer.hpp>
-#include <boost/bind.hpp>
 #include <uhd/utils/tasks.hpp>
 #include <uhd/utils/log.hpp>
+#include <boost/bind.hpp>
 #include <boost/make_shared.hpp>
 
 using namespace uhd;
diff --git a/host/lib/usrp/x300/x300_mb_eeprom.cpp b/host/lib/usrp/x300/x300_mb_eeprom.cpp
index d72a27a77..b8fb59538 100644
--- a/host/lib/usrp/x300/x300_mb_eeprom.cpp
+++ b/host/lib/usrp/x300/x300_mb_eeprom.cpp
@@ -5,7 +5,7 @@
 //
 
 #include "x300_impl.hpp"
-#include "eeprom_utils.hpp"
+#include <uhdlib/utils/eeprom_utils.hpp>
 #include <uhd/usrp/mboard_eeprom.hpp>
 #include <uhd/types/serial.hpp>
 
diff --git a/host/lib/usrp/x300/x300_radio_ctrl_impl.cpp b/host/lib/usrp/x300/x300_radio_ctrl_impl.cpp
index 38d9c2c66..d7c206aec 100644
--- a/host/lib/usrp/x300/x300_radio_ctrl_impl.cpp
+++ b/host/lib/usrp/x300/x300_radio_ctrl_impl.cpp
@@ -5,17 +5,16 @@
 //
 
 #include "x300_radio_ctrl_impl.hpp"
-
 #include "x300_dboard_iface.hpp"
-#include "wb_iface_adapter.hpp"
-#include "gpio_atr_3000.hpp"
-#include "apply_corrections.hpp"
 #include <uhd/usrp/dboard_eeprom.hpp>
 #include <uhd/utils/log.hpp>
 #include <uhd/usrp/dboard_iface.hpp>
 #include <uhd/rfnoc/node_ctrl_base.hpp>
 #include <uhd/transport/chdr.hpp>
 #include <uhd/utils/math.hpp>
+#include <uhdlib/rfnoc/wb_iface_adapter.hpp>
+#include <uhdlib/usrp/cores/gpio_atr_3000.hpp>
+#include <uhdlib/usrp/common/apply_corrections.hpp>
 #include <boost/algorithm/string.hpp>
 #include <boost/make_shared.hpp>
 #include <boost/date_time/posix_time/posix_time_io.hpp>
diff --git a/host/lib/usrp/x300/x300_radio_ctrl_impl.hpp b/host/lib/usrp/x300/x300_radio_ctrl_impl.hpp
index 72e5b3933..ead546a63 100644
--- a/host/lib/usrp/x300/x300_radio_ctrl_impl.hpp
+++ b/host/lib/usrp/x300/x300_radio_ctrl_impl.hpp
@@ -8,17 +8,17 @@
 #ifndef INCLUDED_LIBUHD_RFNOC_X300_RADIO_CTRL_IMPL_HPP
 #define INCLUDED_LIBUHD_RFNOC_X300_RADIO_CTRL_IMPL_HPP
 
-#include "radio_ctrl_impl.hpp"
 #include "x300_clock_ctrl.hpp"
-#include "spi_core_3000.hpp"
 #include "x300_adc_ctrl.hpp"
 #include "x300_dac_ctrl.hpp"
 #include "x300_regs.hpp"
-#include "rx_frontend_core_3000.hpp"
-#include "tx_frontend_core_200.hpp"
 #include <uhd/usrp/dboard_eeprom.hpp>
 #include <uhd/usrp/dboard_manager.hpp>
 #include <uhd/usrp/gpio_defs.hpp>
+#include <uhdlib/rfnoc/radio_ctrl_impl.hpp>
+#include <uhdlib/usrp/cores/rx_frontend_core_3000.hpp>
+#include <uhdlib/usrp/cores/tx_frontend_core_200.hpp>
+#include <uhdlib/usrp/cores/spi_core_3000.hpp>
 
 namespace uhd {
     namespace rfnoc {
diff --git a/host/lib/usrp_clock/octoclock/octoclock_image_loader.cpp b/host/lib/usrp_clock/octoclock/octoclock_image_loader.cpp
index 348ac7dcb..594d10df6 100644
--- a/host/lib/usrp_clock/octoclock/octoclock_image_loader.cpp
+++ b/host/lib/usrp_clock/octoclock/octoclock_image_loader.cpp
@@ -8,7 +8,6 @@
 #include "octoclock_impl.hpp"
 #include "common.h"
 
-#include "../../utils/ihex.hpp"
 #include <uhd/device.hpp>
 #include <uhd/image_loader.hpp>
 #include <uhd/transport/udp_simple.hpp>
@@ -17,8 +16,8 @@
 #include <uhd/utils/byteswap.hpp>
 #include <uhd/utils/paths.hpp>
 #include <uhd/utils/static.hpp>
+#include <uhdlib/utils/ihex.hpp>
 
-#include <stdint.h>
 #include <boost/filesystem.hpp>
 #include <boost/format.hpp>
 #include <boost/thread.hpp>
@@ -30,6 +29,7 @@
 #include <fstream>
 #include <iostream>
 #include <string>
+#include <stdint.h>
 
 namespace fs = boost::filesystem;
 using namespace uhd;
diff --git a/host/lib/utils/CMakeLists.txt b/host/lib/utils/CMakeLists.txt
index 659c855a1..543443615 100644
--- a/host/lib/utils/CMakeLists.txt
+++ b/host/lib/utils/CMakeLists.txt
@@ -9,8 +9,6 @@
 # This file included, use CMake directory variables
 ########################################################################
 
-INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})
-
 ########################################################################
 # Setup defines for process scheduling
 ########################################################################
diff --git a/host/lib/utils/eeprom_utils.cpp b/host/lib/utils/eeprom_utils.cpp
index 0090a3612..6999827c0 100644
--- a/host/lib/utils/eeprom_utils.cpp
+++ b/host/lib/utils/eeprom_utils.cpp
@@ -4,7 +4,7 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "eeprom_utils.hpp"
+#include <uhdlib/utils/eeprom_utils.hpp>
 #include <boost/lexical_cast.hpp>
 
 uhd::byte_vector_t string_to_uint16_bytes(const std::string &num_str){
diff --git a/host/lib/utils/ihex.cpp b/host/lib/utils/ihex.cpp
index ce0dd6e69..6bb0ba9d4 100644
--- a/host/lib/utils/ihex.cpp
+++ b/host/lib/utils/ihex.cpp
@@ -5,8 +5,8 @@
 // SPDX-License-Identifier: GPL-3.0-or-later
 //
 
-#include "ihex.hpp"
 #include <uhd/exception.hpp>
+#include <uhdlib/utils/ihex.hpp>
 #include <boost/format.hpp>
 #include <boost/make_shared.hpp>
 #include <sstream>
diff --git a/host/tests/expert_test.cpp b/host/tests/expert_test.cpp
index 5b1c1ff92..efd4f1d08 100644
--- a/host/tests/expert_test.cpp
+++ b/host/tests/expert_test.cpp
@@ -8,9 +8,9 @@
 #include <boost/test/unit_test.hpp>
 #include <boost/format.hpp>
 #include <boost/make_shared.hpp>
-#include "../lib/experts/expert_container.hpp"
-#include "../lib/experts/expert_factory.hpp"
 #include <uhd/property_tree.hpp>
+#include <uhdlib/experts/expert_container.hpp>
+#include <uhdlib/experts/expert_factory.hpp>
 #include <fstream>
 
 using namespace uhd::experts;
diff --git a/host/utils/CMakeLists.txt b/host/utils/CMakeLists.txt
index 5f8309587..8d391caf1 100644
--- a/host/utils/CMakeLists.txt
+++ b/host/utils/CMakeLists.txt
@@ -69,6 +69,7 @@ IF(ENABLE_USB)
         )
         # Additional include directories for b2xx_fx3_utils
         INCLUDE_DIRECTORIES(
+            ${CMAKE_CURRENT_SOURCE_DIR}/../lib/include
             ${CMAKE_CURRENT_SOURCE_DIR}/../lib/usrp/b200
             ${CMAKE_CURRENT_SOURCE_DIR}/../lib/usrp/common
             ${CMAKE_CURRENT_SOURCE_DIR}/../lib/usrp/common/ad9361_driver
-- 
2.11.0

